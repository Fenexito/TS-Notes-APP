<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>APad - NoteApp</title>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/driver.js@1.3.1/dist/driver.css"/>
    <link rel="stylesheet" href="style.css">
   
    <!-- Web Application Manifest -->
    <link rel="manifest" href="/manifest.json">
    
    <!-- Meta tags for iOS/Safari -->
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black">
    <meta name="apple-mobile-web-app-title" content="APad Notes">
    <link rel="apple-touch-icon" href="/icons/icon-192x192.png">
    
</head>
<body>
    <div class="container">

        <div class="sticky-header-container">
            <div class="header-top-row">
                <div class="title-container">
                    <button type="button" id="btnChecklistMenu" class="menu-toggle-btn">
                        <svg viewBox="0 0 24 24" width="20" height="20" stroke="currentColor" stroke-width="2" fill="none" stroke-linecap="round" stroke-linejoin="round"><line x1="3" y1="12" x2="21" y2="12"></line><line x1="3" y1="6" x2="21" y2="6"></line><line x1="3" y1="18" x2="21" y2="18"></line></svg>
                    </button>
                    <h1 class="ts-notes-title">APad | NoteApp</h1>
                    <span class="app-version" id="appVersionDisplay">v.X.Y</span>
                </div>
                <div id="topactions" class="top-actions">
                    <button type="button" id="btnSee">
                        <svg viewBox="0 0 24 24" width="20" height="20" stroke="currentColor" stroke-width="2" fill="none" stroke-linecap="round" stroke-linejoin="round"><path d="M1 12s4-8 11-8 11 8 11 8-4 8-11 8-11-8-11-8z"></path><circle cx="12" cy="12" r="3"></circle></svg>
                        <span>SEE</span>
                    </button>
                    <button type="button" id="btnSave">
                        <svg viewBox="0 0 24 24" width="20" height="20" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M19 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11l5 5v11a2 2 0 0 1-2 2z"/><polyline points="17 21 17 13 7 13 7 21"/><polyline points="7 3 7 8 15 8"/></svg>
                        <span>SAVE</span>
                    </button>
                    <button type="button" id="btnReset">
                        <svg viewBox="0 0 24 24" width="20" height="20" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.76 2.75L3 8"/><path d="M3 3v5h5"/></svg>
                        <span>RESET</span>
                    </button>
                    <button type="button" id="btnHistory">
                        <svg viewBox="0 0 24 24" width="20" height="20" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M12 2v8l4 4"/><circle cx="12" cy="12" r="10"/></svg>
                        <span>HISTORY</span>
                    </button>
                </div>
            </div>
            <div id="headerDynamicInfo" class="header-dynamic-info">
                <div class="dynamic-field-item">
                    <span class="header-field-display">BAN: <span id="headerBan-value"></span></span>
                    <button type="button" class="copy-button-sticky" data-target-id="ban">
                        <svg viewBox="0 0 24 24" width="13" height="13" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><rect width="14" height="14" x="8" y="8" rx="2" ry="2"/><path d="M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2v2"/></svg>
                    </button>
                </div>
                <div class="dynamic-field-item">
                    <span class="header-field-display">CID: <span id="headerCid-value"></span></span>
                    <button type="button" class="copy-button-sticky" data-target-id="cid">
                        <svg viewBox="0 0 24 24" width="14" height="14" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><rect width="14" height="14" x="8" y="8" rx="2" ry="2"/><path d="M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2v2"/></svg>
                    </button>
                </div>
                <div class="dynamic-field-item">
                    <span class="header-field-display">NAME: <span id="headerName-value"></span></span>
                </div>
                <div class="dynamic-field-item">
                    <span class="header-field-display">CBR: <span id="headerCbr-value"></span></span>
                    <button type="button" class="copy-button-sticky" data-target-id="cbr">
                        <svg viewBox="0 0 24 24" width="14" height="14" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><rect width="14" height="14" x="8" y="8" rx="2" ry="2"/><path d="M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2v2"/></svg>
                    </button>
                </div>
            </div>
        </div>
        <div id="agentinfo" class="agent-info">
            <label for="agentName">AGENT:</label>
            <div class="input-with-edit-button">
                <input type="text" id="agentName" name="agentName" value="Agent Name" readonly required autocomplete="off">
                <button type="button" id="editAgentNameBtn" class="edit-button">
                    <svg class="edit-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M17 3a2.828 2.828 0 0 1 4 4L7.5 20.5 2 22l1.5-5.5L17 3z"></path></svg>
                </button>
                <span id="mainNoteCharCountHeader" class="char-counter">0</span>
            </div>
            <div class="skill-toggle-container">
                <span id="skill-text-indicator" class="skill-text-indicator">FFH</span>
                <label class="skill-toggle-switch">
                    <input type="checkbox" id="skillToggle">
                    <span class="slider"></span>
                </label>
            </div>
        </div>
        <form id="callNoteForm">
            <section id="seccion1" class="form-section">
                <h2 class="section-title">
                    <span>Account Info & Verification</span>
                    <button type="button" class="clean-section-btn" data-section-id="seccion1" title="Clear section">
                        <svg viewBox="0 0 24 24" width="16" height="16" stroke="currentColor" stroke-width="2" fill="none" stroke-linecap="round" stroke-linejoin="round"><path d="M3 6l3 0l0 18l12 0l0-18l3 0"></path><path d="M1 6l22 0"></path><path d="M8 6l0-3l8 0l0 3"></path></svg>
                    </button>
                </h2>
                <div class="section-content">
                    <div class="input-row four-columns">
                        <div class="input-group">
                            <label for="ban">BAN</label>
                            <div class="input-with-copy-button">
                                <input type="text" id="ban" name="ban" inputmode="numeric" pattern="[0-9]*" required autocomplete="off">
                                <button type="button" class="copy-button" data-target="ban" title="Copy BAN">
                                    <svg xmlns="http://www.w3.org/2000/svg" width="11" height="11" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><rect width="14" height="14" x="8" y="8" rx="2" ry="2"/><path d="M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2v2"/></svg>
                                </button>
                            </div>
                        </div>
                        <div class="input-group">
                            <label for="cid">CID</label>
                            <div class="input-with-copy-button">
                                <input type="text" id="cid" name="cid" inputmode="numeric" pattern="[0-9]*" required autocomplete="off">
                                <button type="button" class="copy-button" data-target="cid" title="Copy CID">
                                    <svg xmlns="http://www.w3.org/2000/svg" width="11" height="11" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><rect width="14" height="14" x="8" y="8" rx="2" ry="2"/><path d="M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2v2"/></svg>
                                </button>
                            </div>
                        </div>
                        <div class="input-group">
                            <label for="name">NAME</label>
                            <input type="text" id="name" name="name" pattern="[A-Za-z\s]*" required autocomplete="name-off">
                        </div>
                        <div class="input-group">
                            <label for="cbr">CBR</label>
                            <div class="input-with-copy-button">
                                <input type="text" id="cbr" name="cbr" inputmode="numeric" pattern="[0-9]*" required autocomplete="off">
                                <button type="button" class="copy-button" data-target="cbr" title="Copy CBR">
                                    <svg xmlns="http://www.w3.org/2000/svg" width="11" height="11" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><rect width="14" height="14" x="8" y="8" rx="2" ry="2"/><path d="M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2v2"/></svg>
                                </button>
                            </div>
                        </div>
                    </div>
                    <div class="input-row account-info-row">
                        <div class="input-group">
                            <label for="caller">CALLER</label>
                            <select id="caller" name="caller" required>
                                <option value="">Select an option</option>
                                <option value="Owner">Owner</option>
                                <option value="Auth User">Auth User</option>
                                <option value="Consultation">Consultation</option>
                                <option value="Other">Other</option>
                            </select>
                        </div>
                        <div class="input-group">
                            <label for="verifiedBy">VERIFIED BY</label>
                            <select id="verifiedBy" name="verifiedBy" required>
                                <option value="">Select an option</option>
                                <option value="PIN">PIN</option>
                                <option value="IVR">IVR</option>
                                <option value="Security Questions">Security Questions</option>
                                <option value="Manual Auth">Manual Auth</option>
                                <option value="By Previous Agent">By Previous Agent</option>
                                <option value="N/Refuses to Verify">N/Refuses to Verify</option>
                                <option value="N/Missing Info">N/Missing Info</option>
                                <option value="N/Not Owner or Auth User">N/Not Owner or Auth User</option>
                                <option value="Not Required">Not Required</option>
                            </select>
                        </div>
                        <div class="input-group">
                            <label for="address">ADDRESS</label>
                            <input type="text" id="address" name="address" autocomplete="address-off">
                        </div>
                        <div id="xidFieldContainer" class="input-group hidden-field">
                            <label for="xid">XID</label>
                            <input type="text" id="xid" name="xid" required autocomplete="off">
                        </div>
                    </div>
                </div>
            </section>
            <section id="seccion2" class="form-section">
                <h2 class="section-title">
                    <span>Status, Issue and Troubleshoot Steps</span>
                    <button type="button" class="clean-section-btn" data-section-id="seccion2" title="Clear section">
                        <svg viewBox="0 0 24 24" width="16" height="16" stroke="currentColor" stroke-width="2" fill="none" stroke-linecap="round" stroke-linejoin="round"><path d="M3 6l3 0l0 18l12 0l0-18l3 0"></path><path d="M1 6l22 0"></path><path d="M8 6l0-3l8 0l0 3"></path></svg>
                    </button>
                </h2>
                <div class="section-content section2-grid-layout">
                    <div class="input-row radio-group-row">
                        <div class="input-group radio-group" id="outageRadioGroup">
                            <label>Outage</label>
                            <div class="radio-options">
                                <input type="radio" id="outageYes" name="outage" value="yes">
                                <label for="outageYes">Yes</label>
                                <input type="radio" id="outageNo" name="outage" value="no">
                                <label for="outageNo">No</label>
                            </div>
                        </div>
                        <div class="input-group radio-group" id="errorsInNCRadioGroup">
                            <label>NetCracker</label>
                            <div class="radio-options">
                                <input type="radio" id="errorsInNCYes" name="errorsInNC" value="yes">
                                <label for="errorsInNCYes">Yes</label>
                                <input type="radio" id="errorsInNCNo" name="errorsInNC" value="no">
                                <label for="errorsInNCNo">No</label>
                            </div>
                        </div>
                        <div class="input-group radio-group" id="accountSuspendedRadioGroup">
                            <label>Suspended</label>
                            <div class="radio-options">
                                <input type="radio" id="accountSuspendedYes" name="accountSuspended" value="yes">
                                <label for="accountSuspendedYes">Yes</label>
                                <input type="radio" id="accountSuspendedNo" name="accountSuspended" value="no">
                                <label for="accountSuspendedNo">No</label>
                            </div>
                        </div>
                    </div>
                    <div class="input-row three-columns-layout">
                        <div class="input-group" id="serviceOnCsrGroup">
                            <label for="serviceOnCsr">SERVICE ON CSR</label>
                            <select id="serviceOnCsr" name="serviceOnCsr" required>
                                <option value="">Select Status</option>
                                <option value="Active">Active</option>
                                <option value="Pending">Pending</option>
                                <option value="Activating">Activating</option>
                                <option value="Suspended">Suspended</option>
                                <option value="Cancelled">Cancelled</option>
                            </select>
                        </div>
                        <div class="input-group">
                            <label for="serviceSelect">SERVICE</label>
                            <select id="serviceSelect" name="serviceSelect" required>
                                <option value="">Select a service</option>
                                <option value="HighSpeed / Fiber">HighSpeed / Fiber</option>
                                <option value="HighSpeed / Copper">HighSpeed / Copper</option>
                                <option value="Optik TV (Legacy)">Optik TV (Legacy)</option>
                                <option value="Optik TV (Evo)">Optik TV (Evo)</option>
                                <option value="Pik TV">Pik TV</option>
                                <option value="HomePhone / Fiber">HomePhone / Fiber</option>
                                <option value="HomePhone / Copper">HomePhone / Copper</option>
                                <option value="Telus Email">Telus Email</option>
                                <option value="MyTelus">MyTelus</option>
                                <option value="TOS">TOS</option>
                                <option value="Telus Connect App">Telus Connect App</option>
                                <option value="SHS Legacy">SHS Legacy</option>
                                <option value="SHS ADT / Acquisition / Custom Home">SHS ADT / Acquisition / Custom Home</option>
                                <option value="Living Well Companion">Living Well Companion</option>
                                <option value="Other">Other</option>
                            </select>
                        </div>
                        <div class="input-group">
                            <label for="issueSelect">WORKFLOW</label>
                            <select id="issueSelect" name="issueSelect" required disabled>
                                <option value="">Select an issue</option>
                            </select>
                        </div>
                    </div>
                    <div class="input-row three-columns-layout">
                        <div class="input-group wide-column">
                            <label for="cxIssueText">CX ISSUE</label>
                            <textarea id="cxIssueText" name="cxIssueText" rows="4" required autocomplete="off"></textarea>
                        </div>
                        <div class="input-group narrow-column">
                            <label for="additionalinfoText">ADDITIONAL INFO</label>
                            <textarea id="additionalinfoText" name="additionalinfoText" rows="4" autocomplete="off"></textarea>
                        </div>
                    </div>
                    <div class="input-row" id="affectedTextRow" style="display: none;">
                        <div class="input-group full-width">
                            <label for="affectedText" id="affectedLabel">AFFECTED</label>
                            <textarea id="affectedText" name="affectedText" autocomplete="off"></textarea>
                        </div>
                    </div>
                    <div class="input-row four-columns-layout" id="physicalCheckListsContainer">
                        <div class="input-group physical-check-item-with-label-above">
                            <label for="physicalCheckList1Select" id="physicalCheckList1Label">ONT/GATEWAY</label>
                            <select id="physicalCheckList1Select" name="physicalCheckList1" required>
                                <option value="">Select an option</option>
                            </select>
                        </div>
                        <div class="input-group physical-check-item">
                            <label for="physicalCheckList2Select" id="physicalCheckList2Label">MODEM/GATEWAY</label>
                            <div class="checkbox-and-select-wrapper">
                                <input type="checkbox" id="enablePhysicalCheck2" class="physical-check-toggle">
                                <select id="physicalCheckList2Select" name="physicalCheckList2" disabled>
                                    <option value="">Select an option</option>
                                </select>
                            </div>
                        </div>
                        <div class="input-group physical-check-item">
                            <label for="physicalCheckList3Select" id="physicalCheckList3Label">BOOSTER/EXTENDER</label>
                            <div class="checkbox-and-select-wrapper">
                                <input type="checkbox" id="enablePhysicalCheck3" class="physical-check-toggle">
                                <select id="physicalCheckList3Select" name="physicalCheckList3" disabled>
                                    <option value="">Select an option</option>
                                </select>
                            </div>
                        </div>
                        <div class="input-group physical-check-item">
                            <label for="physicalCheckList4Select" id="physicalCheckList4Label">EXTRA BOOSTER</label>
                            <div class="checkbox-and-select-wrapper">
                                <input type="checkbox" id="enablePhysicalCheck4" class="physical-check-toggle">
                                <select id="physicalCheckList4Select" name="physicalCheckList4" disabled>
                                    <option value="">Select an option</option>
                                </select>
                            </div>
                        </div>
                    </div>
                    <div class="input-row three-columns-layout" id="optikTvLegacySpecificFields" style="display: none;">
                        <div class="input-group">
                            <label for="xVuStatusSelect" id="xVuStatusLabel">xVu STATUS</label>
                            <select id="xVuStatusSelect" name="xVuStatus" disabled></select>
                        </div>
                        <div class="input-group">
                            <label for="packetLossSelect" id="packetLossLabel">PACKET LOSS</label>
                            <select id="packetLossSelect" name="packetLoss" disabled></select>
                        </div>
                    </div>
                    <div class="input-row">
                        <div class="input-group full-width">
                            <label for="troubleshootingProcessText" class="label-with-right-aligned-counter">
                                <span>TROUBLESHOOTING PROCESS</span>
                                <span id="troubleshootingCharCount" class="char-counter">0</span>
                            </label>
                            <textarea id="troubleshootingProcessText" name="troubleshootingProcessText" rows="6" required autocomplete="off"></textarea>
                        </div>
                    </div>
                    <div class="input-row links-row">
                        <div class="input-group go-link-group">
                            <p>Always use <a href="http://go/checkphysical" target="_blank" id="goCheckPhysicalLink" rel="noopener noreferrer"><strong>GO/CHECKPHYSICAL</strong></a></p>
                        </div>
                        <div class="input-group go-link-group">
                            <p>Always use <a href="http://go/tscopilot" target="_blank" id="goTsCopilotLink" rel="noopener noreferrer"><strong>GO/TSCOPILOT</strong></a></p>
                        </div>
                    </div>
                </div>
            </section>
            <section id="seccion3" class="form-section">
                <h2 class="section-title">
                    <span>Advanced Wifi Analytics & TVS</span>
                    <button type="button" class="clean-section-btn" data-section-id="seccion3" title="Clear section">
                        <svg viewBox="0 0 24 24" width="16" height="16" stroke="currentColor" stroke-width="2" fill="none" stroke-linecap="round" stroke-linejoin="round"><path d="M3 6l3 0l0 18l12 0l0-18l3 0"></path><path d="M1 6l22 0"></path><path d="M8 6l0-3l8 0l0 3"></path></svg>
                    </button>
                </h2>
                <div class="section-content">
                    <div class="input-row three-columns-layout">
                        <div class="input-group">
                            <label for="awaAlertsSelect">AWA ALERTS</label>
                            <select id="awaAlertsSelect" name="awaAlerts" required>
                                <option value="">Select an option</option>
                            </select>
                        </div>
                        <div class="input-group physical-check-item">
                            <label for="awaAlerts2Select">AWA ALERTS 2</label>
                            <div class="checkbox-and-select-wrapper">
                                <input type="checkbox" id="enableAwaAlerts2" class="physical-check-toggle">
                                <select id="awaAlerts2Select" name="awaAlerts2" disabled>
                                    <option value="">Select an option</option>
                                </select>
                            </div>
                        </div>
                        <div class="input-group">
                            <label for="awaStepsSelect">AWA STEPS</label>
                            <select id="awaStepsSelect" name="awaSteps" disabled>
                                <option value="">Select an option</option>
                            </select>
                        </div>
                    </div>
                    <div class="input-row download-upload-row four-columns-layout">
                        <div class="input-group">
                            <label for="downloadBeforeInput">DL BEFORE</label>
                            <input type="text" id="downloadBeforeInput" name="downloadBefore" autocomplete="off">
                        </div>
                        <div class="input-group">
                            <label for="uploadBeforeInput">UP BEFORE</label>
                            <input type="text" id="uploadBeforeInput" name="uploadBefore" autocomplete="off">
                        </div>
                        <div class="input-group">
                            <label for="downloadAfterInput">DL AFTER</label>
                            <input type="text" id="downloadAfterInput" name="downloadAfter" autocomplete="off">
                        </div>
                        <div class="input-group">
                            <label for="uploadAfterInput">UP AFTER</label>
                            <input type="text" id="uploadAfterInput" name="uploadAfter" autocomplete="off">
                        </div>
                    </div>
                    <div class="input-row three-columns-layout">
                        <div class="input-group awa-devices-group">
                            <label>ACTIVE/TOTAL DEVICES</label>
                            <div class="active-total-inputs">
                                <input type="text" id="activeDevicesInput" name="activeDevices" placeholder="Active" autocomplete="off">
                                <span class="separator">/</span>
                                <input type="text" id="totalDevicesInput" name="totalDevices" placeholder="Total" autocomplete="off">
                            </div>
                        </div>
                        <div class="input-group">
                            <label for="tvsSelect">TVS</label>
                            <select id="tvsSelect" name="tvsSelect" required>
                                <option value="">Select an option</option>
                                <option value="YES">YES</option>
                                <option value="NO / Offered but Cx refuses">NO / Offered but Cx refuses</option>
                                <option value="NO / Offered but Cx don't have internet">NO / Offered but Cx don't have internet</option>
                                <option value="NO / Offered but Cx don't have smartphone">NO / Offered but Cx don't have smartphone</option>
                                <option value="NO / Offered but Cx can't open SMS / Link">NO / Offered but Cx can't open SMS / Link</option>
                                <option value="NO / Cx not at home">NO / Cx not at home</option>
                                <option value="Not needed for this interaction">Not needed for this interaction</option>
                            </select>
                        </div>
                        <div class="input-group" id="tvsKeyFieldContainer" style="display: none;">
                            <label for="tvsKeyInput">TVS KEY</label>
                            <input type="text" id="tvsKeyInput" name="tvsKeyInput" autocomplete="off">
                        </div>
                    </div>
                    <div class="input-row">
                        <div class="input-group full-width">
                            <label for="extraStepsSelect">EXTRA STEPS</label>
                            <select id="extraStepsSelect" name="extraStepsSelect">
                                <option value="">Select an option</option>
                            </select>
                        </div>
                    </div>
                </div>
            </section>
            <section id="seccion4" class="form-section">
                <h2 class="section-title">
                    <span>Resolution</span>
                    <button type="button" class="clean-section-btn" data-section-id="seccion4" title="Clear section">
                        <svg viewBox="0 0 24 24" width="16" height="16" stroke="currentColor" stroke-width="2" fill="none" stroke-linecap="round" stroke-linejoin="round"><path d="M3 6l3 0l0 18l12 0l0-18l3 0"></path><path d="M1 6l22 0"></path><path d="M8 6l0-3l8 0l0 3"></path></svg>
                    </button>
                </h2>
                <div class="section-content">
                    <div class="input-row three-columns-layout">
                        <div class="input-group">
                            <label for="resolvedSelect">RESOLVED</label>
                            <select id="resolvedSelect" name="resolvedSelect" required>
                                <option value="">Select an option</option>
                                <option value="Yes | EOC">Yes | EOC</option>
                                <option value="No | Tech Booked">No | Tech Booked</option>
                                <option value="No | Follow Up Required">No | Follow Up Required</option>
                                <option value="No | Follow Up Required | Set SCB with FVA">No | Follow Up Required | Set SCB with FVA</option>
                                <option value="No | BOSR Created">No | BOSR Created</option>
                                <option value="No | NC Ticket Created">No | NC Ticket Created</option>
                                <option value="Cx ask for a Manager | Unable to de escalate. Manager still needed | Escalate to EMT">Cx ask for a Manager | Unable to de escalate. Manager still needed | Escalate to EMT</option>
                                <option value="Cx need to be transfered">Cx need to be transfered</option>
                            </select>
                        </div>
                        <div class="input-group physical-check-item">
                            <label for="transferSelect">TRANSFER</label>
                            <div class="checkbox-and-select-wrapper">
                                <input type="checkbox" id="transferCheckbox" class="physical-check-toggle">
                                <select id="transferSelect" name="transferSelect" disabled>
                                    <option value="">Select an option</option>
                                </select>
                            </div>
                        </div>
                        <div class="input-group">
                            <label for="csrOrderInput">CSR ORDER</label>
                            <input type="text" id="csrOrderInput" name="csrOrderInput" inputmode="numeric" pattern="[0-9]*" autocomplete="off">
                        </div>
                    </div>
                    <div class="input-row three-columns-layout">
                        <div class="input-group" id="aocFieldContainer" style="display: none;">
                            <label for="aocInput">AOC</label>
                            <input type="text" id="aocInput" name="aocInput" readonly autocomplete="off">
                        </div>
                        <div class="input-group" id="dispatchDateInputContainer" style="display: none;">
                            <label for="dispatchDateInput" id="dispatchDateLabel">DISPATCH DATE</label>
                            <input type="date" id="dispatchDateInput" name="dispatchDateInput" autocomplete="off">
                        </div>
                        <div class="input-group" id="dispatchTimeSlotSelectContainer" style="display: none;">
                            <label for="dispatchTimeSlotSelect" id="dispatchTimeLabel">DISPATCH TIME</label>
                            <select id="dispatchTimeSlotSelect" name="dispatchTimeSlotSelect">
                                <option value="">Select an option</option>
                            </select>
                        </div>
                    </div>
                    <div class="input-row two-columns-dynamic-cbr2-ticket">
                        <div class="input-group" id="cbr2FieldContainer" style="display: none;">
                            <label for="cbr2Input" id="cbr2Label">CBR2</label>
                            <input type="text" id="cbr2Input" name="cbr2Input" autocomplete="off">
                        </div>
                        <div class="input-group flex-grow-ticket">
                            <label for="ticketInput">TICKET</label>
                            <div class="input-with-copy-button">
                                <input type="text" id="ticketInput" name="ticketInput" inputmode="numeric" pattern="[0-9]*" required autocomplete="off">
                                <button type="button" class="copy-button" data-target="ticketInput" title="Copy Ticket">
                                    <svg xmlns="http://www.w3.org/2000/svg" width="11" height="11" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><rect width="14" height="14" x="8" y="8" rx="2" ry="2"/><path d="M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2v2"/></svg>
                                </button>
                            </div>
                        </div>
                    </div>
                </div>
            </section>
            </form>
    </div>

    <!-- Welcome Modal -->
    <div id="welcomeModalOverlay" class="modal-overlay" style="display:none;">
        <div class="modal-content small-modal">
            <div class="modal-header">
                <h3>Welcome to APad</h3>
            </div>
            <div class="modal-body">
                <p>This application helps you take technical support call notes efficiently and organized.</p>
                <p><strong>Creator:</strong> x331671 | Alex Van Houtven | FFH PureFiber TS</p>
                <p><strong>Current Version:</strong> <span id="welcomeAppVersionDisplay">Loading...</span></p>
                <div class="input-group">
                    <label for="welcomeAgentNameInput">Enter your name (it will appear in your notes):</label>
                    <input type="text" id="welcomeAgentNameInput" placeholder="Your agent name" required autocomplete="off">
                </div>
            </div>
            <div class="modal-actions-confirm">
                <button type="button" id="startTakingNotesBtn" class="modal-action-btn copy-btn-style">START</button>
            </div>
        </div>
    </div>
    
    <div id="noteModalOverlay" class="modal-overlay" style="display:none">
        <div class="modal-content large-modal">
            <div class="modal-header">
                <h2>
                    Final Note
                    <div class="modal-char-counter-display">
                        <span id="modalNoteCharCount" class="char-counter">0</span>
                    </div>
                </h2>
                <button type="button" class="close-modal-btn" id="modalCloseBtn">
                    <svg viewBox="0 0 24 24" width="20" height="20" stroke="currentColor" stroke-width="2" fill="none" stroke-linecap="round" stroke-linejoin="round"><line x1="18" y1="6" x2="6" y2="18"></line><line x1="6" y1="6" x2="18" y2="18"></line></svg>
                </button>
            </div>
            <div class="modal-body">
                <textarea id="modalNoteTextarea" rows="20" readonly autocomplete="off"></textarea>
            </div>
            <div class="modal-actions">
                <button type="button" class="modal-action-btn copy-btn-style" id="modalCopyBtn">
                    <svg viewBox="0 0 24 24" width="20" height="20" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><rect width="14" height="14" x="8" y="8" rx="2" ry="2"/><path d="M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2v2"/></svg>
                    COPY
                </button>
                <button type="button" class="modal-action-btn edit-btn-style" id="modalEditFromHistoryBtn" style="display: none;">
                    <svg viewBox="0 0 24 24" width="20" height="20" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7"></path><path d="M18.5 2.5a2.121 2.000 0 0 1 3 3L12 15l-4 1 1-4 9.5-9.5z"></path></svg>
                    EDIT
                </button>
                <button type="button" class="modal-action-btn separate-btn-style" id="modalSeparateBtn">
                    <svg viewBox="0 0 24 24" width="20" height="20" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M12 2h6a2 2 0 0 1 2 2v16a2 2 0 0 1-2 2h-6"/><path d="M6 2h6v20H6a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2z"/></svg>
                    SPLIT
                </button>
                <button type="button" class="modal-action-btn copy-save-btn-style" id="modalCopySaveBtn">
                    <svg viewBox="0 0 24 24" width="20" height="20" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M12 15H4a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h10a2 2 0 0 1 2 2v1H18a2 2 0 0 1 2 2v10a2 2 0 0 1-2 2h-5"/><path d="m8 7 2 2 4-4"/><path d="M18 7v6h-6"/></svg>
                    COPY & SAVE
                </button>
                <button type="button" class="modal-action-btn edit-btn-style" id="modalResolutionBtn">
                    <svg viewBox="0 0 24 24" width="20" height="20" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M9 11l3 3L22 4"/><path d="M21 12v7a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11"/></svg>
                    RESOLUTION
                </button>
                <button type="button" class="modal-action-btn" id="modalCopilotBtn">
                    <svg viewBox="0 0 24 24" width="20" height="20" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M12 8V4H8"/><rect width="16" height="12" x="4" y="8" rx="2"/><path d="M2 14h2"/><path d="M20 14h2"/><path d="M15 13v2"/><path d="M9 13v2"/></svg>
                    COPILOT
                </button>
                <button type="button" class="modal-action-btn close-btn-style" id="modalCloseBtnBottom">
                    <svg viewBox="0 0 24 24" width="20" height="20" stroke="currentColor" stroke-width="2" fill="none" stroke-linecap="round" stroke-linejoin="round"><line x1="18" y1="6" x2="6" y2="18"></line><line x1="6" y1="6" x2="18" y2="18"></line></svg>
                    CLOSE
                </button>
            </div>
        </div>
    </div>

    <div id="separateNoteModalOverlay" class="modal-overlay" style="display:none">
        <div class="modal-content large-modal">
            <div class="modal-header">
                <h2>Split Note</h2>
                <button type="button" class="close-modal-btn" id="separateModalCloseBtn">
                    <svg viewBox="0 0 24 24" width="20" height="20" stroke="currentColor" stroke-width="2" fill="none" stroke-linecap="round" stroke-linejoin="round"><line x1="18" y1="6" x2="6" y2="18"></line><line x1="6" y1="6" x2="18" y2="18"></line></svg>
                </button>
            </div>
            <div class="modal-body separate-notes-container">
                </div>
            <div class="modal-actions">
                <button type="button" class="modal-action-btn copy-save-btn-style" id="separateModalCopySaveBtn">
                    <svg viewBox="0 0 24 24" width="20" height="20" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M12 15H4a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h10a2 2 0 0 1 2 2v1H18a2 2 0 0 1 2 2v10a2 2 0 0 1-2 2h-5"/><path d="m8 7 2 2 4-4"/><path d="M18 7v6h-6"/></svg>
                    COPY & SAVE
                </button>
                <button type="button" class="modal-action-btn edit-btn-style" id="separateModalResolutionBtn">
                    <svg viewBox="0 0 24 24" width="20" height="20" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M9 11l3 3L22 4"/><path d="M21 12v7a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11"/></svg>
                    RESOLUTION
                </button>
                <button type="button" class="modal-action-btn" id="separateModalCopilotBtn">
                    <svg viewBox="0 0 24 24" width="20" height="20" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M12 8V4H8"/><rect width="16" height="12" x="4" y="8" rx="2"/><path d="M2 14h2"/><path d="M20 14h2"/><path d="M15 13v2"/><path d="M9 13v2"/></svg>
                    COPILOT
                </button>
                <button type="button" class="modal-action-btn close-btn-style" id="separateModalCloseBtnBottom">
                    <svg viewBox="0 0 24 24" width="20" height="20" stroke="currentColor" stroke-width="2" fill="none" stroke-linecap="round" stroke-linejoin="round"><line x1="18" y1="6" x2="6" y2="18"></line><line x1="6" y1="6" x2="18" y2="18"></line></svg>
                    CLOSE
                </button>
            </div>
        </div>
    </div>

    <div id="customConfirmModal" class="modal-overlay" style="display:none">
        <div class="modal-content small-modal">
            <div class="modal-header">
                <h3>Warning</h3>
            </div>
            <div class="modal-body">
                <p id="confirmMessage" class="confirm-message"></p>
            </div>
            <div class="modal-actions-confirm">
                <button type="button" id="confirmNoBtn" class="modal-action-btn close-btn-style">NO</button>
                <button type="button" id="confirmYesBtn" class="modal-action-btn copy-btn-style">YES</button>
            </div>
        </div>
    </div>
    
    <div id="feedbackModalOverlay" class="modal-overlay" style="display:none">
        <div class="modal-content">
            <div class="modal-header">
                <h3>Send Feedback</h3>
                <button type="button" class="close-modal-btn" id="closeFeedbackModalBtn">
                    <svg viewBox="0 0 24 24" width="20" height="20" stroke="currentColor" stroke-width="2" fill="none" stroke-linecap="round" stroke-linejoin="round"><line x1="18" y1="6" x2="6" y2="18"></line><line x1="6" y1="6" x2="18" y2="18"></line></svg>
                </button>
            </div>
            <div id="feedback-form-content" class="modal-body">
                <div class="google-form-container">
                    <iframe src="https://docs.google.com/forms/d/e/1FAIpQLScDxUnncRkZSDfL8_G2H8Z5buuaDp63RoN4rdpqB7cA0KjawA/viewform?embedded=true" width="520" height="540" frameborder="0" marginheight="0" marginwidth="0">Loading…</iframe>
                </div>
            </div>
            </div>
    </div>
    
    <div id="toast-container"></div>
    <div id="checklistSidebar" class="checklist-sidebar">
        <div class="sidebar-header">
            <h3>Checklist Menu</h3>
            <button type="button" class="close-sidebar-btn" id="closeChecklistBtn">
                <svg viewBox="0 0 24 24" width="18" height="18" stroke="currentColor" stroke-width="2" fill="none" stroke-linecap="round" stroke-linejoin="round"><line x1="18" y1="6" x2="6" y2="18"></line><line x1="6" y1="6" x2="18" y2="18"></line></svg>
            </button>
        </div>
        <div class="checklist-content">
            <div class="checklist-section">
                <h4 class="checklist-section-title">
                    <span class="checklist-title-text">Excellence Mandate</span>
                    <button type="button" class="clean-checklist-section-btn" data-section="excellence" title="Clear section">
                        <svg viewBox="0 0 24 24" width="16" height="16" stroke="currentColor" stroke-width="2" fill="none" stroke-linecap="round" stroke-linejoin="round"><path d="M3 6l3 0l0 18l12 0l0-18l3 0"></path><path d="M1 6l22 0"></path><path d="M8 6l0-3l8 0l0 3"></path></svg>
                    </button>
                </h4>
                <div class="checklist-items-container">
                    <div class="checklist-item status-pending" data-required="true">
                        <label>Did you secure the call by asking for a <strong>CALLBACK NUMBER</strong>?</label>
                        <div class="checklist-options">
                            <input type="radio" id="checklistCallbackNumber_yes" name="checklistCallbackNumber" value="yes"><label for="checklistCallbackNumber_yes">Yes</label>
                            <input type="radio" id="checklistCallbackNumber_no" name="checklistCallbackNumber" value="no"><label for="checklistCallbackNumber_no">No</label>
                            <input type="radio" id="checklistCallbackNumber_na" name="checklistCallbackNumber" value="na"><label for="checklistCallbackNumber_na">N/A</label>
                        </div>
                    </div>
                    <div class="checklist-item status-pending" data-required="true">
                        <label>Did you do all the relevant <strong>PROBING QUESTIONS</strong>?</label>
                        <div class="checklist-options">
                            <input type="radio" id="checklistProbingQuestions_yes" name="checklistProbingQuestions" value="yes"><label for="checklistProbingQuestions_yes">Yes</label>
                            <input type="radio" id="checklistProbingQuestions_no" name="checklistProbingQuestions" value="no"><label for="checklistProbingQuestions_no">No</label>
                            <input type="radio" id="checklistProbingQuestions_na" name="checklistProbingQuestions" value="na"><label for="checklistProbingQuestions_na">N/A</label>
                        </div>
                    </div>
                    <div class="checklist-item status-pending" data-required="true">
                        <label>Have you researched <strong>ADVANCED WIFI ANALYTICS</strong>?</label>
                        <div class="checklist-options">
                            <input type="radio" id="checklistAdvancedWifi_yes" name="checklistAdvancedWifi" value="yes"><label for="checklistAdvancedWifi_yes">Yes</label>
                            <input type="radio" id="checklistAdvancedWifi_no" name="checklistAdvancedWifi" value="no"><label for="checklistAdvancedWifi_no">No</label>
                            <input type="radio" id="checklistAdvancedWifi_na" name="checklistAdvancedWifi" value="na"><label for="checklistAdvancedWifi_na">N/A</label>
                        </div>
                    </div>
                    <div class="checklist-item status-pending" data-required="true">
                        <label>Have you used <strong>TVS / ROUTE THIS</strong>? Did you use video, photos, scan network and deadspots detector?</label>
                        <div class="checklist-options">
                            <input type="radio" id="checklistTvs_yes" name="checklistTvs" value="yes"><label for="checklistTvs_yes">Yes</label>
                            <input type="radio" id="checklistTvs_no" name="checklistTvs" value="no"><label for="checklistTvs_no">No</label>
                            <input type="radio" id="checklistTvs_na" name="checklistTvs" value="na"><label for="checklistTvs_na">N/A</label>
                        </div>
                    </div>
                    <div class="checklist-item status-pending" data-required="true">
                        <label>Did you do a <strong>REBOOT / FACTORY RESET</strong>? If that fixed the issue, are you sure this is not a <strong>TEMPORARY FIX</strong>?</label>
                        <div class="checklist-options">
                            <input type="radio" id="checklistReboot_yes" name="checklistReboot" value="yes"><label for="checklistReboot_yes">Yes</label>
                            <input type="radio" id="checklistReboot_no" name="checklistReboot" value="no"><label for="checklistReboot_no">No</label>
                            <input type="radio" id="checklistReboot_na" name="checklistReboot" value="na"><label for="checklistReboot_na">N/A</label>
                        </div>
                    </div>
                    <div class="checklist-item status-pending" data-required="true">
                        <label>Did you perform a device <strong>SWAP</strong>? Is absolutely <strong>NECESSARY</strong>? Are you sure this will <strong>FIX THE ISSUE</strong>?</label>
                        <div class="checklist-options">
                            <input type="radio" id="checklistSwap_yes" name="checklistSwap" value="yes"><label for="checklistSwap_yes">Yes</label>
                            <input type="radio" id="checklistSwap_no" name="checklistSwap" value="no"><label for="checklistSwap_no">No</label>
                            <input type="radio" id="checklistSwap_na" name="checklistSwap" value="na"><label for="checklistSwap_na">N/A</label>
                        </div>
                    </div>
                    <div class="checklist-item status-pending" data-required="true">
                        <label>Did you try to Set Automated Callback Instead of proactively offering a <strong>CALLBACK</strong>?</label>
                        <div class="checklist-options">
                            <input type="radio" id="checklistCallback_yes" name="checklistCallback" value="yes"><label for="checklistCallback_yes">Yes</label>
                            <input type="radio" id="checklistCallback_no" name="checklistCallback" value="no"><label for="checklistCallback_no">No</label>
                            <input type="radio" id="checklistCallback_na" name="checklistCallback" value="na"><label for="checklistCallback_na">N/A</label>
                        </div>
                    </div>
                </div>
            </div>

            <div class="checklist-section">
                <h4 class="checklist-section-title">
                    <span class="checklist-title-text">Troubleshoot Steps</span>
                    <button type="button" class="clean-checklist-section-btn" data-section="troubleshoot" title="Clear section">
                        <svg viewBox="0 0 24 24" width="16" height="16" stroke="currentColor" stroke-width="2" fill="none" stroke-linecap="round" stroke-linejoin="round"><path d="M3 6l3 0l0 18l12 0l0-18l3 0"></path><path d="M1 6l22 0"></path><path d="M8 6l0-3l8 0l0 3"></path></svg>
                    </button>
                </h4>
                <div class="checklist-items-container">
                    <div class="checklist-item status-pending">
                        <label>Did you select and follow the <strong>CORRECT INSIGHT WORKFLOW</strong>?</label>
                        <div class="checklist-options">
                            <input type="radio" id="checklistCorrectWorkflow_yes" name="checklistCorrectWorkflow" value="yes"><label for="checklistCorrectWorkflow_yes">Yes</label>
                            <input type="radio" id="checklistCorrectWorkflow_no" name="checklistCorrectWorkflow" value="no"><label for="checklistCorrectWorkflow_no">No</label>
                            <input type="radio" id="checklistCorrectWorkflow_na" name="checklistCorrectWorkflow" value="na"><label for="checklistCorrectWorkflow_na">N/A</label>
                        </div>
                    </div>
                    <div class="checklist-item status-pending">
                        <label>Did you use <a href="http://go/checkphysical" target="_blank" id="goCheckPhysicalLink" rel="noopener noreferrer"><strong>CHECK PHYSICAL</strong></a> to review the equipment and connections / lights / cables / damage?</label>
                        <div class="checklist-options">
                            <input type="radio" id="checklistCheckPhysical_yes" name="checklistCheckPhysical" value="yes"><label for="checklistCheckPhysical_yes">Yes</label>
                            <input type="radio" id="checklistCheckPhysical_no" name="checklistCheckPhysical" value="no"><label for="checklistCheckPhysical_no">No</label>
                            <input type="radio" id="checklistCheckPhysical_na" name="checklistCheckPhysical" value="na"><label for="checklistCheckPhysical_na">N/A</label>
                        </div>
                    </div>
                    <div class="checklist-item status-pending">
                        <label>Did you use the <a href="http://go/tscopilot" target="_blank" id="goTsCopilotLink" rel="noopener noreferrer"><strong>TS COPILOT AI</strong></a> to confirm you perform all the necesary steps to resolve the issue?</label>
                        <div class="checklist-options">
                            <input type="radio" id="checklistTsCopilot_yes" name="checklistTsCopilot" value="yes"><label for="checklistTsCopilot_yes">Yes</label>
                            <input type="radio" id="checklistTsCopilot_no" name="checklistTsCopilot" value="no"><label for="checklistTsCopilot_no">No</label>
                            <input type="radio" id="checklistTsCopilot_na" name="checklistTsCopilot" value="na"><label for="checklistTsCopilot_na">N/A</label>
                        </div>
                    </div>
                    <div class="checklist-item status-pending">
                        <label>Did you confirm with the cx that <strong>ALL SERVICES</strong> are <strong>WORKING</strong> now?</label>
                        <div class="checklist-options">
                            <input type="radio" id="checklistAllServices_yes" name="checklistAllServices" value="yes"><label for="checklistAllServices_yes">Yes</label>
                            <input type="radio" id="checklistAllServices_no" name="checklistAllServices" value="no"><label for="checklistAllServices_no">No</label>
                            <input type="radio" id="checklistAllServices_na" name="checklistAllServices" value="na"><label for="checklistAllServices_na">N/A</label>
                        </div>
                    </div>
                    <div class="checklist-item status-pending">
                        <label>Did you use <strong>GO/SEND</strong> in this interaction?</label>
                        <div class="checklist-options">
                            <input type="radio" id="checklistGoSend_yes" name="checklistGoSend" value="yes"><label for="checklistGoSend_yes">Yes</label>
                            <input type="radio" id="checklistGoSend_no" name="checklistGoSend" value="no"><label for="checklistGoSend_no">No</label>
                            <input type="radio" id="checklistGoSend_na" name="checklistGoSend" value="na"><label for="checklistGoSend_na">N/A</label>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <div class="sidebar-footer">
            <button type="button" id="btnChecklistYesAll" class="modal-action-btn">YES ALL</button>
        </div>
    </div>
    <div class="sidebar-overlay" id="checklist-sidebar-overlay"></div>
    
    <div id="historySidebar" class="history-sidebar">
        <div class="sidebar-header">
            <h3>Note History</h3>
            <button type="button" class="close-sidebar-btn" id="closeHistoryBtn">
                <svg viewBox="0 0 24 24" width="18" height="18" stroke="currentColor" stroke-width="2" fill="none" stroke-linecap="round" stroke-linejoin="round"><line x1="18" y1="6" x2="6" y2="18"></line><line x1="6" y1="6" x2="18" y2="18"></line></svg>
            </button>
        </div>
        <div class="history-search-container">
            <input type="text" id="historySearchInput" placeholder="Search by BAN, CID, CBR or Ticket..." autocomplete="off">
        </div>
        <div class="note-history-list" id="noteHistoryList">
            <p class="no-notes-message" id="noNotesMessage">No saved notes yet.</p>
        </div>
        <!-- INICIO: Contenido Añadido para Importar/Exportar -->
        <div id="historyactionsfooter" class="history-actions-footer">
            <button type="button" id="exportBtn" class="history-footer-btn export-btn">
                <svg xmlns="http://www.w3.org/2000/svg" width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"/><polyline points="7 10 12 15 17 10"/><line x1="12" y1="15" x2="12" y2="3"/></svg>
                <span>EXPORTAR</span>
            </button>
            <button type="button" id="importBtn" class="history-footer-btn import-btn">
                <svg xmlns="http://www.w3.org/2000/svg" width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"/><polyline points="17 8 12 3 7 8"/><line x1="12" y1="3" x2="12" y2="15"/></svg>
                <span>IMPORTAR</span>
            </button>
            <input type="file" id="importFile" class="hidden-file-input" accept="application/json">
        </div>
        <!-- FIN: Contenido Añadido para Importar/Exportar -->
    </div>
    <div class="sidebar-overlay" id="history-sidebar-overlay"></div>

    <div id="feedback-widget">
        <div class="feedback-tooltip">Have an idea to improve the app? Send it here!</div>
        <button type="button" id="feedback-btn" title="Send Feedback">
            <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z"></path></svg>
        </button>
    </div>
    
    <footer class="app-footer">
        <p>TELUS FFH PURE FIBER Tech Support | x331671 | Alex Van Houtven | June 2025</p>
    </footer>

    <script src="https://unpkg.com/dexie@latest/dist/dexie.js"></script>

    <script>
      // INICIO DEL CÓDIGO DE DRIVER.JS (VERSIÓN COMPATIBLE 0.9.8)
      !function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t():"function"==typeof define&&define.amd?define(t):e.Driver=t()}(this,function(){"use strict";function e(e){return(e=e||window.event).preventDefault&&e.preventDefault(),e.returnValue=!1}function t(e){if(e)return e.split("-")[0]}function n(e){if(e)return e.split("-")[1]}function o(e,t){return getComputedStyle(e,null).getPropertyValue(t)}function i(e){return e.getBoundingClientRect()}function r(e,t){var n=t.getBoundingClientRect(),o=n.top,r=n.left,s=n.width,l=n.height,a=e.getBoundingClientRect();return o>=a.top&&r>=a.left&&o+l<=a.bottom&&r+s<=a.right}function s(e){if(!e||!e.tagName)return null;var t=e.tagName.toLowerCase();return"input"!==t&&"textarea"!==t&&"select"!==t&&"button"!==t?null:e}function l(e){if(!e||!e.tagName)return!1;var t=e.tagName.toLowerCase();return"input"===t||"textarea"===t||"select"===t||"button"===t}function a(e,t){e.className=e.className.replace(new RegExp("(^|\\b)"+t.split(" ").join("|")+"(\\b|$)","gi")," ")}function c(e,t){var n=e.className.split(" ");return n.indexOf(t)<0&&(n.push(t),e.className=n.join(" ")),e}function d(t){var n=t||window;return n.requestAnimationFrame||n.webkitRequestAnimationFrame||n.mozRequestAnimationFrame||n.msRequestAnimationFrame||n.oRequestAnimationFrame||function(e){n.setTimeout(e,1e3/60)}}function u(e){var t=document.body,n=document.documentElement;return Math.max(t.scrollHeight,t.offsetHeight,n.clientHeight,n.scrollHeight,n.offsetHeight)-e}function p(e){return e.body.scrollTop||e.documentElement.scrollTop}function g(e,t,n,o){var i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,r=p(document),s=r+e,l=n-t,a=performance.now();!function c(){var p=performance.now()-a,g=l/300*p,h=s+g;p>=300||h>=n?o(n):h<=r?o(r):(window.scrollTo(0,h),i&&i(h,n),d()(c))}(),e.preventDefault()}function h(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var m,f,v=function(){function e(t,n){for(var o=0;o<n.length;o++){var i=n[o];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),b="driver-stage-no-animation",y="driver-stage-animating",w="driver-popover-position-bottom",C="driver-popover-position-top",S="driver-popover-position-left",E="driver-popover-position-right",k="driver-popover-no-animation",L="driver-popover-animating",_="driver-active",A="driver-stage-highlighted",O="driver-stage-background",N="driver-popover",T="driver-popover-tip",D="driver-popover-title",P="driver-popover-description",M="driver-popover-footer",R="driver-popover-close-btn",x="driver-popover-next-btn",j="driver-popover-prev-btn",I="driver-next-btn-text",q="driver-prev-btn-text",H="driver-close-btn-text",B=10,F=function(){function s(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};h(this,s),this.options=Object.assign({},{animate:!0,opacity:.75,padding:B,allowClose:!0,doneBtnText:"Done",closeBtnText:"Close",stageBackground:"#ffffff",nextBtnText:"Next &rarr;",prevBtnText:"&larr; Previous",showButtons:!0,keyboardControl:!0,overlayClickNext:!1,onHighlightStarted:function(){},onHighlighted:function(){},onDeselectionStarted:function(){},onDeselected:function(){},onReset:function(){},onNext:function(){},onPrevious:function(){}},e),this.document=document,this.body=this.document.body,this.window=window,this.isActivated=!1,this.steps=e.steps||[],this.currentStep=0,this.currentMove=null,this.onResize=this.onResize.bind(this),this.onKeyUp=this.onKeyUp.bind(this),this.onMouseUp=this.onMouseUp.bind(this)}return v(s,[{key:"onResize",value:function(){this.isActivated&&this.refresh()}},{key:"onKeyUp",value:function(t){if(this.isActivated&&this.options.keyboardControl){if(27===t.keyCode)return this.reset();if(39===t.keyCode)return this.moveNext();if(38===t.keyCode)return this.movePrevious()}}},{key:"onMouseUp",value:function(t){if(this.isActivated){var n=s.driverClicked(t.target);n||this.reset(),n&&!this.isSameNode(n)&&this.options.overlayClickNext&&this.moveNext()}}},{key:"isSameNode",value:function(e){return this.currentMove&&this.currentMove.node===e}},{key:"moveNext",value:function(){var e=this.steps[this.currentStep+1];e?this.highlight(++this.currentStep):this.reset()}},{key:"movePrevious",value:function(){var e=this.steps[this.currentStep-1];e?this.highlight(--this.currentStep):this.reset()}},{key:"hasNextStep",value:function(){return!!this.steps[this.currentStep+1]}},{key:"hasPreviousStep",value:function(){return!!this.steps[this.currentStep-1]}},{key:"reset",value:function(t){var n=this;if(this.isActivated){var o=this.currentMove||{};o.node&&(this.options.onDeselectionStarted(o.node),o.node.style.position="",o.node.style.background="",o.node.style.zIndex=""),this.stage&&this.body.removeChild(this.stage),this.popover&&this.body.removeChild(this.popover),this.isActivated=!1,this.currentMove=null,this.window.removeEventListener("resize",this.onResize,!1),this.window.removeEventListener("keyup",this.onKeyUp,!1),this.window.removeEventListener("mouseup",this.onMouseUp,!1),this.document.body.removeEventListener("keydown",e,!0),this.document.body.removeEventListener("mousewheel",e,!0),this.options.onDeselected(o.node),t||this.options.onReset(o.node),a(this.body,_)}var i=this.steps.indexOf(o);setTimeout(function(){n.currentStep=0,n.popover=null},300)}},{key:"highlight",value:function(e){var t=this,n="number"==typeof e?this.steps[e]:e;this.currentStep=this.steps.indexOf(n);var o=this.currentMove?this.currentMove:n;n.node&&(this.options.onHighlightStarted(n.node),this.options.animate?this.showOverlay(n,o):this.showOverlay(n,n)),setTimeout(function(){t.showPopover(n,o)},400)}},{key:"getCalculatedPosition",value:function(e){var s={top:e.top,left:e.left,right:e.right,bottom:e.bottom};return{canBeCentered:s.left>0&&s.right>0&&s.top>0&&s.bottom>0,isTop:s.top>s.bottom,isBottom:s.bottom>s.top,isLeft:s.left>s.right,isRight:s.right>s.left,isVerticallySmaller:s.top<20||s.bottom<20,isHorizontallySmaller:s.left<20||s.right<20,raw:s,top:s.top,bottom:this.window.innerHeight-s.bottom,left:s.left,right:this.window.innerWidth-s.right}}},{key:"showOverlay",value:function(e,s){var l=this;this.stage||(this.stage=this.createStage());var a=this.getStagePosition(e.node),u=this.getStagePosition(s.node),h={x:a.x-u.x,y:a.y-u.y},m={width:u.width+"px",height:u.height+"px",top:u.top+"px",left:u.left+"px",transform:"translate("+h.x+"px, "+h.y+"px)"};this.options.animate?this.stage.style.cssText="width: "+m.width+"; height: "+m.height+"; top: "+m.top+"; left: "+m.left+";\n        transform: "+m.transform+";":c(this.stage,b),setTimeout(function(){var t={width:a.width+"px",height:a.height+"px",top:a.top+"px",left:a.left+"px",transform:"translate(0, 0)"};c(l.stage,y),l.stage.style.cssText="width: "+t.width+"; height: "+t.height+"; top: "+t.top+"; left: "+t.left+";\n        transform: "+t.transform+";"},10),this.currentMove=e}},{key:"createStage",value:function(){var e=this.document.createElement("div");return e.setAttribute("id",O),e.style.opacity="0",c(e,"driver-stage-background"),this.body.appendChild(e),e}},{key:"getStagePosition",value:function(e){var t=i(e),s=t.top,n=t.right,l=t.bottom,a=t.left,c=o(e,"position");"fixed"===c&&(s=e.offsetTop,n=e.offsetLeft+e.offsetWidth,l=e.offsetTop+e.offsetHeight,a=e.offsetLeft);var d={height:Math.max(t.height,e.offsetHeight),width:Math.max(t.width,e.offsetWidth)};return{top:s-this.options.padding,left:a-this.options.padding,right:a+d.width+this.options.padding,bottom:s+d.height+this.options.padding,width:d.width+2*this.options.padding,height:d.height+2*this.options.padding}}},{key:"showPopover",value:function(e,s){var l=this;this.popover&&this.body.removeChild(this.popover);var d=this.document.createElement("div");d.setAttribute("id",N),c(d,k);var u=this.document.createElement("div");u.setAttribute("id",T);var p=this.document.createElement("div");p.innerText=e.title,p.setAttribute("id",D);var g=this.document.createElement("div");g.innerHTML=e.description,g.setAttribute("id",P);var h=this.getPopoverFooter();d.appendChild(u),e.title&&d.appendChild(p),e.description&&d.appendChild(g),this.options.showButtons&&d.appendChild(h),this.body.appendChild(d),e.popover&&(e.popover.className&&(d.className+=" "+e.popover.className),e.popover.style&&(d.style.cssText+=e.popover.style));var m=this.getCalculatedPosition(i(this.stage)),f=this.getPopoverPosition(e,m);d.style.cssText="display: block; top: "+f.top+"px; left: "+f.left+"px; ",setTimeout(function(){c(d,L),l.options.onHighlighted(e.node)},400),this.popover=d}},{key:"getPopoverPosition",value:function(s,l){var a=this.popover.offsetHeight,c=this.popover.offsetWidth,d=s.position||this.calculateBestPosition(l),u=i(this.stage),p=u.top,g=u.left,h=u.width,m=u.height,f=this.window.innerHeight,v=this.window.innerWidth,b={};switch(d){case"top":b={top:p-a-B,left:g+h/2-c/2};break;case"bottom":b={top:p+m+B,left:g+h/2-c/2};break;case"left":b={top:p+m/2-a/2,left:g-c-B};break;case"right":b={top:p+m/2-a/2,left:g+h+B}}var y=i(this.popover),D=y.top,P=y.left;if(P<0)b.left=B;else{var M=P+c;M>v&&(b.left=v-c-B)}return D<0?b.top=B:D+a>f&&(b.top=f-a-B),this.popoverTipPosition=d,this.popover.className=N+" driver-popover-position-"+d,b}},{key:"getPopoverFooter",value:function(){var e=this.document.createElement("div");e.setAttribute("id",M);var t=this.document.createElement("a");t.href="javascript:void(0);",t.innerText=this.options.closeBtnText,c(t,R),c(t,H);var n=this.document.createElement("span"),o=this.document.createElement("a");this.options.doneBtnText&&(o.innerText=this.options.doneBtnText),o.href="javascript:void(0);",c(o,x),c(o,I);var i=this.document.createElement("a");return i.href="javascript:void(0);",i.innerText=this.options.prevBtnText,c(i,j),c(i,q),this.hasNextStep()?n.appendChild(i):o.innerText=this.options.doneBtnText||"Done",this.hasPreviousStep()&&n.appendChild(o),e.appendChild(t),e.appendChild(n),e}},{key:"calculateBestPosition",value:function(e){var o=t(this.currentMove.position),i=n(this.currentMove.position);if(o)return o;var r,s,l,a="top",c=e.top-this.popover.offsetHeight-B,d=e.bottom-this.popover.offsetHeight-B;return c>0&&d>0?(r="top",s=Math.min(c,d),l="bottom",Math.max(c,d)):c>0?a="top":d>0&&(a="bottom"),c=e.left-this.popover.offsetWidth-B,d=e.right-this.popover.offsetWidth-B,c>0&&d>0?(r=c>d?"right":"left",s=Math.min(c,d),l=c>d?"left":"right",Math.max(c,d)):c>0?a=Math.max(e.left,e.right)>e.left?"left":"top":d>0&&(a="right"),a}},{key:"start",value:function(e){this.reset(!0),this.isActivated=!0,c(this.body,_),this.document.body.addEventListener("keydown",e,!0),this.document.body.addEventListener("mousewheel",e,!0),this.window.addEventListener("resize",this.onResize,!1),this.window.addEventListener("keyup",this.onKeyUp,!1),this.window.addEventListener("mouseup",this.onMouseUp,!1),this.highlight(e||0)}},{key:"defineSteps",value:function(e){this.steps=e}}],[{key:"driverClicked",value:function(e){for(var t=["input","textarea","select","button","a"];e&&e.parentElement;){if(e.id===O)return e;if(e.id===N)return e;if(l(e))return e;if(-1!==t.indexOf(e.tagName.toLowerCase()))return e;e=e.parentElement}return null}}]),s}();return m=null,f={},function(e,t,n){t in f?Object.defineProperty(f,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):f[t]=n,e.prototype[t]=function(){var e=this.options[t]||n;e.apply(this,arguments)}}(F,"onNext"),function(e,t,n){t in f?Object.defineProperty(f,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):f[t]=n,e.prototype[t]=function(){var e=this.options[t]||n;e.apply(this,arguments)}}(F,"onPrevious"),F});

      // INICIO DE TU CÓDIGO DEL TUTORIAL (adaptado para la versión 0.9.8)
      if (!localStorage.getItem('tutorialDriverCompletado')) {
        // 1. Crear una instancia de Driver
        const driver = new Driver({
          animate: true,
          allowClose: true,
          onReset: () => {
            localStorage.setItem('tutorialDriverCompletado', 'true');
          }
        });

        // 2. Definir los pasos para esta versión
        driver.defineSteps([
          {
            // Para el primer paso, no se define 'element' para que aparezca centrado
            title: '¡Bienvenido/a a tu Asistente de Notas!',
            description: 'Este es un recorrido rápido por las funciones principales.'
          },
          {
            element: '#agentinfo',
            title: 'Información del Agente',
            description: 'Asegúrate de que tu nombre y "Skill" estén correctos.',
            position: 'bottom'
          },
          {
            element: '#callNoteForm',
            title: 'Formulario Principal',
            description: 'Aquí documentarás toda la interacción.',
            position: 'top'
          },
          {
            element: '#seccion1',
            title: 'Cuenta y Verificación',
            description: 'Ingresa los detalles de la cuenta y los pasos de verificación.',
            position: 'top'
          },
          {
            element: '#seccion2',
            title: 'Problema y Diagnóstico',
            description: 'Describe el problema reportado y los pasos de diagnóstico.',
            position: 'top'
          },
          {
            element: '#seccion3',
            title: 'AWA y TVS',
            description: 'Documenta aquí la información relacionada con AWA y TVS.',
            position: 'top'
          },
          {
            element: '#seccion4',
            title: 'Resolución',
            description: 'Detalla la resolución del caso y los próximos pasos.',
            position: 'top'
          },
          {
            element: '#topactions',
            title: 'Acciones Principales',
            description: 'Desde aquí puedes copiar la nota, generarla o limpiarla.',
            position: 'bottom'
          },
          {
            element: '#noteModalOverlay',
            title: 'Vista Previa de la Nota',
            description: 'Aquí puedes ver una vista previa de la nota final.',
            position: 'top'
          },
          {
            element: '#separateNoteModalOverlay',
            title: 'Nota Separada',
            description: 'Este modal te permite trabajar con la nota en otro formato.',
            position: 'top'
          },
          {
            element: '#historySidebar',
            title: 'Historial de Notas',
            description: 'Este panel contiene el historial de tus notas.',
            position: 'left'
          },
          {
            element: '#historySearchInput',
            title: 'Buscador en Historial',
            description: 'Usa este campo para buscar rápidamente en tu historial.',
            position: 'bottom'
          },
          {
            element: '#historyactionsfooter',
            title: 'Exportar e Importar',
            description: 'Desde aquí puedes exportar o importar tu historial.',
            position: 'top'
          },
          {
            element: '#checklistSidebar',
            title: 'Excellence Mandate',
            description: 'Este menú te da acceso a checklists y mandatos de excelencia.',
            position: 'right'
          },
          {
            element: '#feedback-btn',
            title: 'Tu Opinión Importa',
            description: 'Si tienes sugerencias o encuentras un error, contáctanos aquí.',
            position: 'top'
          }
        ]);

        // 3. Iniciar el tour
        driver.start();
      }
    </script>
</body>
</html>

<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>APad - NoteApp</title>
    <link rel="stylesheet" href="/style.css">
    <link rel="stylesheet" href="shortkey/shortkey.css">
    <link rel="manifest" href="/manifest.json">
    
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black">
    <meta name="apple-mobile-web-app-title" content="APad Notes">
    <link rel="apple-touch-icon" href="/icons/icon-192x192.png">
    
</head>
<body>
    <div class="container">
        <div class="sticky-header-container">
            <div class="header-top-row">
                <div class="title-container">
                    <button type="button" id="btnChecklistMenu" class="menu-toggle-btn">
                        <svg viewBox="0 0 24 24" width="20" height="20" stroke="currentColor" stroke-width="2" fill="none" stroke-linecap="round" stroke-linejoin="round"><line x1="3" y1="12" x2="21" y2="12"></line><line x1="3" y1="6" x2="21" y2="6"></line><line x1="3" y1="18" x2="21" y2="18"></line></svg>
                    </button>
                    <h1 class="ts-notes-title">APad | NoteApp</h1>
                    <span class="app-version" id="appVersionDisplay">v.X.Y</span>
                </div>
                <div id="topactions" class="top-actions">
                    <button type="button" id="btnSee">
                        <svg viewBox="0 0 24 24" width="20" height="20" stroke="currentColor" stroke-width="2" fill="none" stroke-linecap="round" stroke-linejoin="round"><path d="M1 12s4-8 11-8 11 8 11 8-4 8-11 8-11-8-11-8z"></path><circle cx="12" cy="12" r="3"></circle></svg>
                        <span>SEE</span>
                    </button>
                    <button type="button" id="btnSave">
                        <svg viewBox="0 0 24 24" width="20" height="20" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M19 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11l5 5v11a2 2 0 0 1-2 2z"/><polyline points="17 21 17 13 7 13 7 21"/><polyline points="7 3 7 8 15 8"/></svg>
                        <span>SAVE</span>
                    </button>
                    <button type="button" id="btnReset">
                        <svg viewBox="0 0 24 24" width="20" height="20" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.76 2.75L3 8"/><path d="M3 3v5h5"/></svg>
                        <span>RESET</span>
                    </button>
                    <button type="button" id="btnHistory">
                        <svg viewBox="0 0 24 24" width="20" height="20" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M12 2v8l4 4"/><circle cx="12" cy="12" r="10"/></svg>
                        <span>HISTORY</span>
                    </button>
                </div>
            </div>
            <div id="headerDynamicInfo" class="header-dynamic-info">
                <div class="dynamic-field-item">
                    <span class="header-field-display">BAN: <span id="headerBan-value"></span></span>
                    <button type="button" class="copy-button-sticky" data-target-id="ban">
                        <svg viewBox="0 0 24 24" width="13" height="13" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><rect width="14" height="14" x="8" y="8" rx="2" ry="2"/><path d="M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2v2"/></svg>
                    </button>
                </div>
                <div class="dynamic-field-item">
                    <span class="header-field-display">CID: <span id="headerCid-value"></span></span>
                    <button type="button" class="copy-button-sticky" data-target-id="cid">
                        <svg viewBox="0 0 24 24" width="14" height="14" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><rect width="14" height="14" x="8" y="8" rx="2" ry="2"/><path d="M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2v2"/></svg>
                    </button>
                </div>
                <div class="dynamic-field-item">
                    <span class="header-field-display">NAME: <span id="headerName-value"></span></span>
                </div>
                <div class="dynamic-field-item">
                    <span class="header-field-display">CBR: <span id="headerCbr-value"></span></span>
                    <button type="button" class="copy-button-sticky" data-target-id="cbr">
                        <svg viewBox="0 0 24 24" width="14" height="14" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><rect width="14" height="14" x="8" y="8" rx="2" ry="2"/><path d="M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2v2"/></svg>
                    </button>
                </div>
                <div class="dynamic-field-item dynamic-char-counter">
                    <span class="header-field-display"><span id="headerCharCount-value" class="char-counter">0</span></span>
                </div>
            </div>
        </div>

        <div id="agentinfo" class="agent-info">
            <label for="agentName">AGENT:</label>
            <div class="input-with-edit-button">
                <input type="text" id="agentName" name="agentName" value="Agent Name" readonly required autocomplete="off">
                <button type="button" id="editAgentNameBtn" class="edit-button">
                    <svg class="edit-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M17 3a2.828 2.828 0 0 1 4 4L7.5 20.5 2 22l1.5-5.5L17 3z"></path></svg>
                </button>
                <span id="mainNoteCharCountHeader" class="char-counter">0</span>
            </div>
            <div class="skill-toggle-container">
                <span id="skill-text-indicator" class="skill-text-indicator">FFH</span>
                <label class="skill-toggle-switch">
                    <input type="checkbox" id="skillToggle">
                    <span class="slider"></span>
                </label>
            </div>
        </div>
        <form id="callNoteForm">
            <div id="seccion1-wrapper">
                <section id="seccion1" class="form-section">
                    <h2 class="section-title">
                        <span>Account Info & Verification</span>
                    </h2>
                    <div class="section-content">
                        <div class="input-row four-columns">
                            <div class="input-group">
                                <label for="ban">BAN</label>
                                <div class="input-with-copy-button">
                                    <input type="text" id="ban" name="ban" inputmode="numeric" pattern="[0-9]*" required autocomplete="off">
                                    <button type="button" class="copy-button" data-target="ban" title="Copy BAN">
                                        <svg xmlns="http://www.w3.org/2000/svg" width="11" height="11" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><rect width="14" height="14" x="8" y="8" rx="2" ry="2"/><path d="M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2v2"/></svg>
                                    </button>
                                </div>
                            </div>
                            <div class="input-group">
                                <label for="cid">CID</label>
                                <div class="input-with-copy-button">
                                    <input type="text" id="cid" name="cid" inputmode="numeric" pattern="[0-9]*" required autocomplete="off">
                                    <button type="button" class="copy-button" data-target="cid" title="Copy CID">
                                        <svg xmlns="http://www.w3.org/2000/svg" width="11" height="11" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><rect width="14" height="14" x="8" y="8" rx="2" ry="2"/><path d="M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2v2"/></svg>
                                    </button>
                                </div>
                            </div>
                            <div class="input-group">
                                <label for="name">NAME</label>
                                <input type="text" id="name" name="name" pattern="[A-Za-z\s]*" required autocomplete="name-off">
                            </div>
                            <div class="input-group">
                                <label for="cbr">CBR</label>
                                <div class="input-with-copy-button">
                                    <input type="text" id="cbr" name="cbr" inputmode="numeric" pattern="[0-9]*" required autocomplete="off">
                                    <button type="button" class="copy-button" data-target="cbr" title="Copy CBR">
                                        <svg xmlns="http://www.w3.org/2000/svg" width="11" height="11" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><rect width="14" height="14" x="8" y="8" rx="2" ry="2"/><path d="M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2v2"/></svg>
                                    </button>
                                </div>
                            </div>
                        </div>
                        <div class="input-row account-info-row">
                            <div class="input-group">
                                <label for="caller">CALLER</label>
                                <select id="caller" name="caller" required>
                                    <option value="">Select an option</option>
                                    <option value="Owner">Owner</option>
                                    <option value="Auth User">Auth User</option>
                                    <option value="Consultation">Consultation</option>
                                    <option value="Other">Other</option>
                                </select>
                            </div>
                            <div class="input-group">
                                <label for="verifiedBy">VERIFIED BY</label>
                                <select id="verifiedBy" name="verifiedBy" required>
                                    <option value="">Select an option</option>
                                    <option value="PIN">PIN</option>
                                    <option value="IVR">IVR</option>
                                    <option value="Security Questions">Security Questions</option>
                                    <option value="Manual Auth">Manual Auth</option>
                                    <option value="By Previous Agent">By Previous Agent</option>
                                    <option value="N/Refuses to Verify">N/Refuses to Verify</option>
                                    <option value="N/Missing Info">N/Missing Info</option>
                                    <option value="N/Not Owner or Auth User">N/Not Owner or Auth User</option>
                                    <option value="Not Required">Not Required</option>
                                </select>
                            </div>
                            <div class="input-group custom-select-container hidden-field" id="securityQuestionsContainer">
                                <label for="securityQuestionsButton">SECURITY QUESTIONS</label>
                                <button type="button" id="securityQuestionsButton" class="custom-select-button">
                                    <span id="securityQuestionsLabel">Select questions...</span>
                                    <svg class="w-5 h-5 text-gray-400" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" fill="currentColor" aria-hidden="true">
                                        <path fill-rule="evenodd" d="M5.293 7.293a1 1 0 011.414 0L10 10.586l3.293-3.293a1 1 0 111.414 1.414l-4 4a1 1 0 01-1.414 0l-4-4a1 1 0 010-1.414z" clip-rule="evenodd" />
                                    </svg>
                                </button>
                                <div id="securityQuestionsOptionsContainer" class="custom-select-options-container">
                                    <div id="securityQuestionsOptionsList" role="listbox"></div>
                                </div>
                            </div>
                            <div class="input-group">
                                <label for="address">ADDRESS</label>
                                <input type="text" id="address" name="address" autocomplete="address-off">
                            </div>
                            <div id="xidFieldContainer" class="input-group hidden-field">
                                <label for="xid">XID</label>
                                <input type="text" id="xid" name="xid" required autocomplete="off">
                            </div>
                        </div>
                    </div>
                </section>
            </div>
            <div id="seccion2-wrapper">
                <section id="seccion2" class="form-section">
                    <h2 class="section-title">
                        <span>Status, Issue and Troubleshoot Steps</span>
                    </h2>
                    <div class="section-content section2-grid" id="section2-grid-container">
                        <div class="grid-item" id="serviceOnCsrGroup">
                            <div class="input-group">
                                <label for="serviceOnCsr">SERVICE ON CSR</label>
                                <select id="serviceOnCsr" name="serviceOnCsr" required>
                                    <option value="">Select Status</option>
                                    <option value="Active">Active</option>
                                    <option value="Pending">Pending</option>
                                    <option value="Activating">Activating</option>
                                    <option value="Suspended">Suspended</option>
                                    <option value="Cancelled">Cancelled</option>
                                    <option value="No Services">No Services</option>
                                </select>
                            </div>
                        </div>
                        <div class="grid-item">
                            <div class="input-group">
                                <label for="errorSelect">ERROR (Outage/NC)</label>
                                <select id="errorSelect" name="errorSelect" required>
                                    <option value="">Select an option</option>
                                    <option value="Active Outage affecting services">Active Outage affecting services</option>
                                    <option value="Error Found in NetCracker">Error Found in NetCracker</option>
                                </select>
                            </div>
                        </div>
                        <div class="grid-item">
                            <div class="input-group">
                                <label for="serviceSelect">SERVICE</label>
                                <select id="serviceSelect" name="serviceSelect" required>
                                    <option value="">Select a service</option>
                                    <option value="HighSpeed / Fiber">HighSpeed / Fiber</option>
                                    <option value="HighSpeed / Copper">HighSpeed / Copper</option>
                                    <option value="Optik TV (Legacy)">Optik TV (Legacy)</option>
                                    <option value="Optik TV (Evo)">Optik TV (Evo)</option>
                                    <option value="Pik TV">Pik TV</option>
                                    <option value="HomePhone / Fiber">HomePhone / Fiber</option>
                                    <option value="HomePhone / Copper">HomePhone / Copper</option>
                                    <option value="Telus Email">Telus Email</option>
                                    <option value="MyTelus">MyTelus</option>
                                    <option value="TOS">TOS</option>
                                    <option value="Telus Connect App">Telus Connect App</option>
                                    <option value="SHS Legacy">SHS Legacy</option>
                                    <option value="Living Well Companion">Living Well Companion</option>
                                    <option value="Other">Other</option>
                                </select>
                            </div>
                        </div>
                        <div class="grid-item">
                            <div class="input-group">
                                <label for="issueSelect">WORKFLOW</label>
                                <select id="issueSelect" name="issueSelect" required disabled>
                                    <option value="">Select an issue</option>
                                </select>
                            </div>
                        </div>
            
                        <div class="grid-item grid-item-physical-checks">
                            <div class="input-row four-columns-layout" id="physicalCheckListsContainer">
                                <div class="input-group physical-check-item-with-label-above">
                                    <label for="physicalCheckList1Select" id="physicalCheckList1Label">ONT/GATEWAY</label>
                                    <select id="physicalCheckList1Select" name="physicalCheckList1" required>
                                        <option value="">Select an option</option>
                                    </select>
                                </div>
                                <div class="input-group physical-check-item">
                                    <label for="physicalCheckList2Select" id="physicalCheckList2Label">MODEM/GATEWAY</label>
                                    <div class="checkbox-and-select-wrapper">
                                        <input type="checkbox" id="enablePhysicalCheck2" class="physical-check-toggle">
                                        <select id="physicalCheckList2Select" name="physicalCheckList2" disabled>
                                            <option value="">Select an option</option>
                                        </select>
                                    </div>
                                </div>
                                <div class="input-group physical-check-item">
                                    <label for="physicalCheckList3Select" id="physicalCheckList3Label">BOOSTER/EXTENDER</label>
                                    <div class="checkbox-and-select-wrapper">
                                        <input type="checkbox" id="enablePhysicalCheck3" class="physical-check-toggle">
                                        <select id="physicalCheckList3Select" name="physicalCheckList3" disabled>
                                            <option value="">Select an option</option>
                                        </select>
                                    </div>
                                </div>
                                <div class="input-group physical-check-item">
                                    <label for="physicalCheckList4Select" id="physicalCheckList4Label">EXTRA BOOSTER</label>
                                    <div class="checkbox-and-select-wrapper">
                                        <input type="checkbox" id="enablePhysicalCheck4" class="physical-check-toggle">
                                        <select id="physicalCheckList4Select" name="physicalCheckList4" disabled>
                                            <option value="">Select an option</option>
                                        </select>
                                    </div>
                                </div>
                            </div>
                            <div class="input-row three-columns-layout hidden-field" id="optikTvLegacySpecificFields">
                                <div class="input-group">
                                    <label for="xVuStatusSelect" id="xVuStatusLabel">xVu STATUS</label>
                                    <select id="xVuStatusSelect" name="xVuStatus" disabled></select>
                                </div>
                                <div class="input-group">
                                    <label for="packetLossSelect" id="packetLossLabel">PACKET LOSS</label>
                                    <select id="packetLossSelect" name="packetLoss" disabled></select>
                                </div>
                            </div>
                        </div>
                        <div class="grid-item grid-item-cx-issue">
                            <div class="input-group">
                                <label for="cxIssueText">CX ISSUE</label>
                                <textarea id="cxIssueText" name="cxIssueText" required autocomplete="off" class="shortkey-enabled"></textarea>
                            </div>
                        </div>
                        <div class="grid-item grid-item-side-info">
                            <div class="input-group hidden-field" id="errorInfoGroup">
                                <label for="errorInfoText" id="errorInfoLabel">INFO</label>
                                <textarea id="errorInfoText" name="errorInfoText" autocomplete="off"></textarea>
                            </div>
                            <div class="input-group hidden-field" id="affectedTextGroup">
                                <label for="affectedText" id="affectedLabel">AFFECTED</label>
                                <textarea id="affectedText" name="affectedText" autocomplete="off"></textarea>
                            </div>
                        </div>
                        <div class="grid-item grid-item-ts-process">
                            <div class="input-group">
                                <label for="troubleshootingProcessText" class="label-with-right-aligned-counter">
                                    <span>TROUBLESHOOTING PROCESS</span>
                                    <span id="troubleshootingCharCount" class="char-counter">0</span>
                                </label>
                                <textarea id="troubleshootingProcessText" name="troubleshootingProcessText" required autocomplete="off" class="shortkey-enabled"></textarea>
                            </div>
                        </div>
                        <div class="grid-item grid-item-additional-info">
                            <div class="input-group">
                                <label for="additionalinfoText">ADDITIONAL INFO</label>
                                <textarea id="additionalinfoText" name="additionalinfoText" autocomplete="off" class="shortkey-enabled"></textarea>
                            </div>
                        </div>
                    </div>
                </section>
            </div>
            <div id="seccion3-wrapper">
                <section id="seccion3" class="form-section">
                    <h2 class="section-title">
                        <span>Advanced Wifi Analytics & TVS</span>
                    </h2>
                    <div class="section-content">
                        <div class="input-row three-columns-layout">
                            <div class="input-group custom-select-container wide-column" id="awaAlertsContainer">
                                <label for="awaAlertsButton">AWA ALERTS</label>
                                <button type="button" id="awaAlertsButton" class="custom-select-button">
                                    <span id="awaAlertsLabel">Select AWA alerts...</span>
                                    <svg class="w-5 h-5 text-gray-400" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" fill="currentColor" aria-hidden="true">
                                        <path fill-rule="evenodd" d="M5.293 7.293a1 1 0 011.414 0L10 10.586l3.293-3.293a1 1 0 111.414 1.414l-4 4a1 1 0 01-1.414 0l-4-4a1 1 0 010-1.414z" clip-rule="evenodd" />
                                    </svg>
                                </button>
                                <div id="awaAlertsOptionsContainer" class="custom-select-options-container">
                                    <div id="awaAlertsOptionsList" role="listbox">
                                        </div>
                                </div>
                            </div>
                            <div class="input-group">
                                <label for="awaStepsSelect">AWA STEPS</label>
                                <select id="awaStepsSelect" name="awaSteps" disabled>
                                    <option value="">Select an option</option>
                                </select>
                            </div>
                        </div>
                        <div class="input-row download-upload-row four-columns-layout">
                            <div class="input-group">
                                <label for="downloadBeforeInput">DL BEFORE</label>
                                <input type="text" id="downloadBeforeInput" name="downloadBefore" autocomplete="off">
                            </div>
                            <div class="input-group">
                                <label for="uploadBeforeInput">UP BEFORE</label>
                                <input type="text" id="uploadBeforeInput" name="uploadBefore" autocomplete="off">
                            </div>
                            <div class="input-group">
                                <label for="downloadAfterInput">DL AFTER</label>
                                <input type="text" id="downloadAfterInput" name="downloadAfter" autocomplete="off">
                            </div>
                            <div class="input-group">
                                <label for="uploadAfterInput">UP AFTER</label>
                                <input type="text" id="uploadAfterInput" name="uploadAfter" autocomplete="off">
                            </div>
                        </div>
                        <div class="input-row three-columns-layout">
                            <div class="input-group awa-devices-group">
                                <label>ACTIVE/TOTAL DEVICES</label>
                                <div class="active-total-inputs">
                                    <input type="text" id="activeDevicesInput" name="activeDevices" placeholder="Active" autocomplete="off">
                                    <span class="separator">/</span>
                                    <input type="text" id="totalDevicesInput" name="totalDevices" placeholder="Total" autocomplete="off">
                                </div>
                            </div>
                            <div class="input-group">
                                <label for="tvsSelect">TVS</label>
                                <select id="tvsSelect" name="tvsSelect" required>
                                    <option value="">Select an option</option>
                                    <option value="YES">YES</option>
                                    <option value="NO / Offered but Cx refuses">NO / Offered but Cx refuses</option>
                                    <option value="NO / Offered but Cx don't have internet">NO / Offered but Cx don't have internet</option>
                                    <option value="NO / Offered but Cx don't have smartphone">NO / Offered but Cx don't have smartphone</option>
                                    <option value="NO / Offered but Cx can't open SMS / Link">NO / Offered but Cx can't open SMS / Link</option>
                                    <option value="NO / Cx not at home">NO / Cx not at home</option>
                                    <option value="Not needed for this interaction">Not needed for this interaction</option>
                                </select>
                            </div>
                            <div class="input-group hidden-field" id="tvsKeyFieldContainer">
                                <label for="tvsKeyInput">TVS KEY</label>
                                <input type="text" id="tvsKeyInput" name="tvsKeyInput" autocomplete="off">
                            </div>
                        </div>
                        <div class="input-row">
                            <div class="input-group custom-select-container" id="extraStepsContainer">
                                <label for="extraStepsButton">EXTRA STEPS</label>
                                <button type="button" id="extraStepsButton" class="custom-select-button">
                                    <span id="extraStepsLabel">Select extra steps...</span>
                                     <svg class="w-5 h-5 text-gray-400" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" fill="currentColor" aria-hidden="true">
                                        <path fill-rule="evenodd" d="M5.293 7.293a1 1 0 011.414 0L10 10.586l3.293-3.293a1 1 0 111.414 1.414l-4 4a1 1 0 01-1.414 0l-4-4a1 1 0 010-1.414z" clip-rule="evenodd" />
                                    </svg>
                                </button>
                                <div id="extraStepsOptionsContainer" class="custom-select-options-container">
                                    <div id="extraStepsOptionsList" role="listbox">
                                        </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </section>
            </div>
            <div id="seccion4-wrapper">
                <section id="seccion4" class="form-section">
                    <h2 class="section-title">
                        <span>Resolution</span>
                    </h2>
                    <div class="section-content">
                        <div class="input-row three-columns-layout">
                            <div class="input-group">
                                <label for="resolvedSelect">RESOLVED</label>
                                <select id="resolvedSelect" name="resolvedSelect" required>
                                    <option value="">Select an option</option>
                                    <option value="Yes | EOC">Yes | EOC</option>
                                    <option value="No | Call disconnected | Left VM">No | Call disconnected | Left VM</option>
                                    <option value="No | Tech Booked">No | Tech Booked</option>
                                    <option value="No | Follow Up Required">No | Follow Up Required</option>
                                    <option value="No | Follow Up Required | Set SCB with FVA">No | Follow Up Required | Set SCB with FVA</option>
                                    <option value="No | BOSR Created">No | BOSR Created</option>
                                    <option value="No | NC Ticket Created">No | NC Ticket Created</option>
                                    <option value="Cx ask for a Manager | Unable to de escalate. Manager still needed | Escalate to EMT">Cx ask for a Manager | Unable to de escalate. Manager still needed | Escalate to EMT</option>
                                    <option value="Cx needs to be transferred">Cx needs to be transferred</option>
                                </select>
                            </div>
                            <div class="input-group physical-check-item">
                                <label for="transferSelect">TRANSFER</label>
                                <div class="checkbox-and-select-wrapper">
                                    <input type="checkbox" id="transferCheckbox" class="physical-check-toggle">
                                    <select id="transferSelect" name="transferSelect" disabled>
                                        <option value="">Select an option</option>
                                    </select>
                                </div>
                            </div>
                            <div class="input-group">
                                <label for="csrOrderInput">CSR ORDER</label>
                                <input type="text" id="csrOrderInput" name="csrOrderInput" inputmode="numeric" pattern="[0-9]*" autocomplete="off">
                            </div>
                        </div>
                        <div class="input-row three-columns-layout">
                            <div class="input-group hidden-field" id="aocFieldContainer">
                                <label for="aocInput">AOC</label>
                                <input type="text" id="aocInput" name="aocInput" readonly autocomplete="off">
                            </div>
                            <div class="input-group hidden-field" id="dispatchDateInputContainer">
                                <label for="dispatchDateInput" id="dispatchDateLabel">DISPATCH DATE</label>
                                <input type="date" id="dispatchDateInput" name="dispatchDateInput" autocomplete="off">
                            </div>
                            <div class="input-group hidden-field" id="dispatchTimeSlotSelectContainer">
                                <label for="dispatchTimeSlotSelect" id="dispatchTimeLabel">DISPATCH TIME</label>
                                <select id="dispatchTimeSlotSelect" name="dispatchTimeSlotSelect">
                                    <option value="">Select an option</option>
                                </select>
                            </div>
                        </div>
                        <div class="input-row two-columns-dynamic-cbr2-ticket">
                            <div class="input-group hidden-field" id="cbr2FieldContainer">
                                <label for="cbr2Input" id="cbr2Label">CBR2</label>
                                <input type="text" id="cbr2Input" name="cbr2Input" autocomplete="off">
                            </div>
                            <div class="input-group flex-grow-ticket">
                                <label for="ticketInput">TICKET</label>
                                <div class="input-with-copy-button">
                                    <input type="text" id="ticketInput" name="ticketInput" inputmode="numeric" pattern="[0-9]*" required autocomplete="off">
                                    <button type="button" class="copy-button" data-target="ticketInput" title="Copy Ticket">
                                        <svg xmlns="http://www.w3.org/2000/svg" width="11" height="11" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><rect width="14" height="14" x="8" y="8" rx="2" ry="2"/><path d="M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2v2"/></svg>
                                    </button>
                                </div>
                            </div>
                        </div>
                    </div>
                </section>
            </div>
        </form>
    </div>

    <div id="welcomeModalOverlay" class="modal-overlay">
        <div class="modal-content">
            <div class="modal-header">
                <h3 id="welcome-intro-text">Welcome to APad!</h3>
                <span id="welcomeAppVersionDisplay" class="app-version-tag"></span>
            </div>
            <div class="modal-body">
                <p id="welcome-intro-p"></p>
                <div id="welcome-name-prompt">
                    <p>Please enter your name to get started.</p>
                    <div class="input-group" style="
                            margin-top: 30px;
                            margin-bottom: 0px;
                        ">
                        <label for="welcomeAgentNameInput">Your Name</label>
                        <input type="text" id="welcomeAgentNameInput" placeholder="Enter your name here">
                    </div>
                </div>
                <p id="welcome-creator-message"></p>
            </div>
            <div class="modal-actions-confirm">
                <button type="button" id="startTakingNotesBtn" class="modal-action-btn copy-btn-style">Start Taking Notes</button>
            </div>
        </div>
    </div>

    <div id="noteModalOverlay" class="modal-overlay">
        <div class="modal-content large-modal">
            <div class="modal-header">
                <h2>
                    Final Note
                    <div class="modal-char-counter-display">
                        <span id="modalNoteCharCount" class="char-counter">0</span>
                    </div>
                </h2>
                <button type="button" class="close-modal-btn" id="modalCloseBtn">
                    <svg viewBox="0 0 24 24" width="20" height="20" stroke="currentColor" stroke-width="2" fill="none" stroke-linecap="round" stroke-linejoin="round"><line x1="18" y1="6" x2="6" y2="18"></line><line x1="6" y1="6" x2="18" y2="18"></line></svg>
                </button>
            </div>
            <div class="modal-body">
                <textarea id="modalNoteTextarea" rows="20" readonly autocomplete="off"></textarea>
            </div>
            <div class="modal-actions">
                <button type="button" class="modal-action-btn copy-btn-style" id="modalCopyBtn">
                    <svg viewBox="0 0 24 24" width="20" height="20" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><rect width="14" height="14" x="8" y="8" rx="2" ry="2"/><path d="M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2v2"/></svg>
                    COPY
                </button>
                <button type="button" class="modal-action-btn edit-btn-style" id="modalEditFromHistoryBtn" style="display: none;">
                    <svg viewBox="0 0 24 24" width="20" height="20" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7"></path><path d="M18.5 2.5a2.121 2.000 0 0 1 3 3L12 15l-4 1 1-4 9.5-9.5z"></path></svg>
                    EDIT
                </button>
                <button type="button" class="modal-action-btn separate-btn-style" id="modalSeparateBtn">
                    <svg viewBox="0 0 24 24" width="20" height="20" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M12 2h6a2 2 0 0 1 2 2v16a2 2 0 0 1-2 2h-6"/><path d="M6 2h6v20H6a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2z"/></svg>
                    SPLIT
                </button>
                <button type="button" class="modal-action-btn copy-save-btn-style" id="modalCopySaveBtn">
                    <svg viewBox="0 0 24 24" width="20" height="20" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M12 15H4a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h10a2 2 0 0 1 2 2v1H18a2 2 0 0 1 2 2v10a2 2 0 0 1-2 2h-5"/><path d="m8 7 2 2 4-4"/><path d="M18 7v6h-6"/></svg>
                    COPY & SAVE
                </button>
                <button type="button" class="modal-action-btn edit-btn-style" id="modalResolutionBtn">
                    <svg viewBox="0 0 24 24" width="20" height="20" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M9 11l3 3L22 4"/><path d="M21 12v7a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11"/></svg>
                    RESOLUTION
                </button>
                <button type="button" class="modal-action-btn" id="modalCopilotBtn">
                    <svg viewBox="0 0 24 24" width="20" height="20" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M12 8V4H8"/><rect width="16" height="12" x="4" y="8" rx="2"/><path d="M2 14h2"/><path d="M20 14h2"/><path d="M15 13v2"/><path d="M9 13v2"/></svg>
                    COPILOT
                </button>
                <button type="button" class="modal-action-btn close-btn-style" id="modalCloseBtnBottom">
                    <svg viewBox="0 0 24 24" width="20" height="20" stroke="currentColor" stroke-width="2" fill="none" stroke-linecap="round" stroke-linejoin="round"><line x1="18" y1="6" x2="6" y2="18"></line><line x1="6" y1="6" x2="18" y2="18"></line></svg>
                    CLOSE
                </button>
            </div>
        </div>
    </div>

    <div id="separateNoteModalOverlay" class="modal-overlay">
        <div class="modal-content large-modal">
            <div class="modal-header">
                <h2>Split Note</h2>
                <button type="button" class="close-modal-btn" id="separateModalCloseBtn">
                    <svg viewBox="0 0 24 24" width="20" height="20" stroke="currentColor" stroke-width="2" fill="none" stroke-linecap="round" stroke-linejoin="round"><line x1="18" y1="6" x2="6" y2="18"></line><line x1="6" y1="6" x2="18" y2="18"></line></svg>
                </button>
            </div>
            <div class="modal-body separate-notes-container">
                </div>
            <div class="modal-actions">
                <button type="button" class="modal-action-btn copy-save-btn-style" id="separateModalCopySaveBtn">
                    <svg viewBox="0 0 24 24" width="20" height="20" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M12 15H4a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h10a2 2 0 0 1 2 2v1H18a2 2 0 0 1 2 2v10a2 2 0 0 1-2 2h-5"/><path d="m8 7 2 2 4-4"/><path d="M18 7v6h-6"/></svg>
                    COPY & SAVE
                </button>
                <button type="button" class="modal-action-btn edit-btn-style" id="separateModalResolutionBtn">
                    <svg viewBox="0 0 24 24" width="20" height="20" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M9 11l3 3L22 4"/><path d="M21 12v7a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11"/></svg>
                    RESOLUTION
                </button>
                <button type="button" class="modal-action-btn" id="separateModalCopilotBtn">
                    <svg viewBox="0 0 24 24" width="20" height="20" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M12 8V4H8"/><rect width="16" height="12" x="4" y="8" rx="2"/><path d="M2 14h2"/><path d="M20 14h2"/><path d="M15 13v2"/><path d="M9 13v2"/></svg>
                    COPILOT
                </button>
                <button type="button" class="modal-action-btn close-btn-style" id="separateModalCloseBtnBottom">
                    <svg viewBox="0 0 24 24" width="20" height="20" stroke="currentColor" stroke-width="2" fill="none" stroke-linecap="round" stroke-linejoin="round"><line x1="18" y1="6" x2="6" y2="18"></line><line x1="6" y1="6" x2="18" y2="18"></line></svg>
                    CLOSE
                </button>
            </div>
        </div>
    </div>

    <div id="customConfirmModal" class="modal-overlay">
        <div class="modal-content small-modal">
            <div class="modal-header">
                <h3>Warning</h3>
            </div>
            <div class="modal-body">
                <p id="confirmMessage" class="confirm-message"></p>
            </div>
            <div class="modal-actions-confirm">
                <button type="button" id="confirmNoBtn" class="modal-action-btn close-btn-style">NO</button>
                <button type="button" id="confirmYesBtn" class="modal-action-btn copy-btn-style">YES</button>
            </div>
        </div>
    </div>
    
    <div id="feedbackModalOverlay" class="modal-overlay">
        <div class="modal-content">
            <div class="modal-header">
                <h3>Send Feedback</h3>
                <button type="button" class="close-modal-btn" id="closeFeedbackModalBtn">
                    <svg viewBox="0 0 24 24" width="20" height="20" stroke="currentColor" stroke-width="2" fill="none" stroke-linecap="round" stroke-linejoin="round"><line x1="18" y1="6" x2="6" y2="18"></line><line x1="6" y1="6" x2="18" y2="18"></line></svg>
                </button>
            </div>
            <div id="feedback-form-content" class="modal-body">
                <div class="google-form-container">
                    <iframe src="https://docs.google.com/forms/d/e/1FAIpQLScDxUnncRkZSDfL8_G2H8Z5buuaDp63RoN4rdpqB7cA0KjawA/viewform?embedded=true" width="520" height="540" frameborder="0" marginheight="0" marginwidth="0">Loading…</iframe>
                </div>
            </div>
            </div>
    </div>
    
    <div id="toast-container"></div>
    <div id="checklistSidebar" class="checklist-sidebar">
        <div class="sidebar-header">
            <h3>Checklist Menu</h3>
            <div class="sidebar-header-actions">
                <button id="openSettingsBtn" class="bg-blue-600 text-white font-bold py-2 px-4 rounded hover:bg-blue-700">
                    SHORTKEYS
                </button>
                <div class="theme-switch-container">
                    <label for="themeToggle" class="theme-switch-label">
                        <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-sun"><circle cx="12" cy="12" r="5"></circle><line x1="12" y1="1" x2="12" y2="3"></line><line x1="12" y1="21" x2="12" y2="23"></line><line x1="4.22" y1="4.22" x2="5.64" y2="5.64"></line><line x1="18.36" y1="18.36" x2="19.78" y2="19.78"></line><line x1="1" y1="12" x2="3" y2="12"></line><line x1="21" y1="12" x2="23" y2="12"></line><line x1="4.22" y1="19.78" x2="5.64" y2="18.36"></line><line x1="18.36" y1="5.64" x2="19.78" y2="4.22"></line></svg>
                    </label>
                    <label class="theme-switch" for="themeToggle">
                        <input type="checkbox" id="themeToggle" />
                        <span class="theme-slider round"></span>
                    </label>
                    <label for="themeToggle" class="theme-switch-label">
                        <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-moon"><path d="M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"></path></svg>
                    </label>
                </div>
                <button type="button" class="close-sidebar-btn" id="closeChecklistBtn">
                    <svg viewBox="0 0 24 24" width="18" height="18" stroke="currentColor" stroke-width="2" fill="none" stroke-linecap="round" stroke-linejoin="round"><line x1="18" y1="6" x2="6" y2="18"></line><line x1="6" y1="6" x2="18" y2="18"></line></svg>
                </button>
            </div>
        </div>
        <div class="checklist-content">
            <div class="checklist-section">
                <h4 class="checklist-section-title">
                    <span class="checklist-title-text">Excellence Mandate</span>
                </h4>
                <div class="checklist-items-container">
                    <div class="checklist-item status-pending" data-required="true">
                        <label>Did you secure the call by asking for a <strong>CALLBACK NUMBER</strong>?</label>
                        <div class="checklist-options">
                            <input type="radio" id="checklistCallbackNumber_yes" name="checklistCallbackNumber" value="yes"><label for="checklistCallbackNumber_yes">Yes</label>
                            <input type="radio" id="checklistCallbackNumber_no" name="checklistCallbackNumber" value="no"><label for="checklistCallbackNumber_no">No</label>
                            <input type="radio" id="checklistCallbackNumber_na" name="checklistCallbackNumber" value="na"><label for="checklistCallbackNumber_na">N/A</label>
                        </div>
                    </div>
                    <div class="checklist-item status-pending" data-required="true">
                        <label>Did you do all the relevant <strong>PROBING QUESTIONS</strong>?</label>
                        <div class="checklist-options">
                            <input type="radio" id="checklistProbingQuestions_yes" name="checklistProbingQuestions" value="yes"><label for="checklistProbingQuestions_yes">Yes</label>
                            <input type="radio" id="checklistProbingQuestions_no" name="checklistProbingQuestions" value="no"><label for="checklistProbingQuestions_no">No</label>
                            <input type="radio" id="checklistProbingQuestions_na" name="checklistProbingQuestions" value="na"><label for="checklistProbingQuestions_na">N/A</label>
                        </div>
                    </div>
                    <div class="checklist-item status-pending" data-required="true">
                        <label>Have you researched <strong>ADVANCED WIFI ANALYTICS</strong>?</label>
                        <div class="checklist-options">
                            <input type="radio" id="checklistAdvancedWifi_yes" name="checklistAdvancedWifi" value="yes"><label for="checklistAdvancedWifi_yes">Yes</label>
                            <input type="radio" id="checklistAdvancedWifi_no" name="checklistAdvancedWifi" value="no"><label for="checklistAdvancedWifi_no">No</label>
                            <input type="radio" id="checklistAdvancedWifi_na" name="checklistAdvancedWifi" value="na"><label for="checklistAdvancedWifi_na">N/A</label>
                        </div>
                    </div>
                    <div class="checklist-item status-pending" data-required="true">
                        <label>Have you used <strong>TVS / ROUTE THIS</strong>? Did you use video, photos, scan network and deadspots detector?</label>
                        <div class="checklist-options">
                            <input type="radio" id="checklistTvs_yes" name="checklistTvs" value="yes"><label for="checklistTvs_yes">Yes</label>
                            <input type="radio" id="checklistTvs_no" name="checklistTvs" value="no"><label for="checklistTvs_no">No</label>
                            <input type="radio" id="checklistTvs_na" name="checklistTvs" value="na"><label for="checklistTvs_na">N/A</label>
                        </div>
                    </div>
                    <div class="checklist-item status-pending" data-required="true">
                        <label>Did you do a <strong>REBOOT / FACTORY RESET</strong>? If that fixed the issue, are you sure this is not a <strong>TEMPORARY FIX</strong>?</label>
                        <div class="checklist-options">
                            <input type="radio" id="checklistReboot_yes" name="checklistReboot" value="yes"><label for="checklistReboot_yes">Yes</label>
                            <input type="radio" id="checklistReboot_no" name="checklistReboot" value="no"><label for="checklistReboot_no">No</label>
                            <input type="radio" id="checklistReboot_na" name="checklistReboot" value="na"><label for="checklistReboot_na">N/A</label>
                        </div>
                    </div>
                    <div class="checklist-item status-pending" data-required="true">
                        <label>Did you perform a device <strong>SWAP</strong>? Is absolutely <strong>NECESSARY</strong>? Are you sure this will <strong>FIX THE ISSUE</strong>?</label>
                        <div class="checklist-options">
                            <input type="radio" id="checklistSwap_yes" name="checklistSwap" value="yes"><label for="checklistSwap_yes">Yes</label>
                            <input type="radio" id="checklistSwap_no" name="checklistSwap" value="no"><label for="checklistSwap_no">No</label>
                            <input type="radio" id="checklistSwap_na" name="checklistSwap" value="na"><label for="checklistSwap_na">N/A</label>
                        </div>
                    </div>
                    <div class="checklist-item status-pending" data-required="true">
                        <label>Did you try to Set Automated Callback Instead of proactively offering a <strong>CALLBACK</strong>?</label>
                        <div class="checklist-options">
                            <input type="radio" id="checklistCallback_yes" name="checklistCallback" value="yes"><label for="checklistCallback_yes">Yes</label>
                            <input type="radio" id="checklistCallback_no" name="checklistCallback" value="no"><label for="checklistCallback_no">No</label>
                            <input type="radio" id="checklistCallback_na" name="checklistCallback" value="na"><label for="checklistCallback_na">N/A</label>
                        </div>
                    </div>
                </div>
            </div>

            <div class="checklist-section">
                <h4 class="checklist-section-title">
                    <span class="checklist-title-text">Troubleshoot Steps</span>
                </h4>
                <div class="checklist-items-container">
                    <div class="checklist-item status-pending">
                        <label>Did you select and follow the <strong>CORRECT INSIGHT WORKFLOW</strong>?</label>
                        <div class="checklist-options">
                            <input type="radio" id="checklistCorrectWorkflow_yes" name="checklistCorrectWorkflow" value="yes"><label for="checklistCorrectWorkflow_yes">Yes</label>
                            <input type="radio" id="checklistCorrectWorkflow_no" name="checklistCorrectWorkflow" value="no"><label for="checklistCorrectWorkflow_no">No</label>
                            <input type="radio" id="checklistCorrectWorkflow_na" name="checklistCorrectWorkflow" value="na"><label for="checklistCorrectWorkflow_na">N/A</label>
                        </div>
                    </div>
                    <div class="checklist-item status-pending">
                        <label>Did you use <a href="http://go/checkphysical" target="_blank" id="goCheckPhysicalLink" rel="noopener noreferrer"><strong>CHECK PHYSICAL</strong></a> to review the equipment and connections / lights / cables / damage?</label>
                        <div class="checklist-options">
                            <input type="radio" id="checklistCheckPhysical_yes" name="checklistCheckPhysical" value="yes"><label for="checklistCheckPhysical_yes">Yes</label>
                            <input type="radio" id="checklistCheckPhysical_no" name="checklistCheckPhysical" value="no"><label for="checklistCheckPhysical_no">No</label>
                            <input type="radio" id="checklistCheckPhysical_na" name="checklistCheckPhysical" value="na"><label for="checklistCheckPhysical_na">N/A</label>
                        </div>
                    </div>
                    <div class="checklist-item status-pending">
                        <label>Did you use the <a href="http://go/tscopilot" target="_blank" id="goTsCopilotLink" rel="noopener noreferrer"><strong>TS COPILOT AI</strong></a> to confirm you perform all the necesary steps to resolve the issue?</label>
                        <div class="checklist-options">
                            <input type="radio" id="checklistTsCopilot_yes" name="checklistTsCopilot" value="yes"><label for="checklistTsCopilot_yes">Yes</label>
                            <input type="radio" id="checklistTsCopilot_no" name="checklistTsCopilot" value="no"><label for="checklistTsCopilot_no">No</label>
                            <input type="radio" id="checklistTsCopilot_na" name="checklistTsCopilot" value="na"><label for="checklistTsCopilot_na">N/A</label>
                        </div>
                    </div>
                    <div class="checklist-item status-pending">
                        <label>Did you confirm with the cx that <strong>ALL SERVICES</strong> are <strong>WORKING</strong> now?</label>
                        <div class="checklist-options">
                            <input type="radio" id="checklistAllServices_yes" name="checklistAllServices" value="yes"><label for="checklistAllServices_yes">Yes</label>
                            <input type="radio" id="checklistAllServices_no" name="checklistAllServices" value="no"><label for="checklistAllServices_no">No</label>
                            <input type="radio" id="checklistAllServices_na" name="checklistAllServices" value="na"><label for="checklistAllServices_na">N/A</label>
                        </div>
                    </div>
                    <div class="checklist-item status-pending">
                        <label>Did you use <strong>GO/SEND</strong> in this interaction?</label>
                        <div class="checklist-options">
                            <input type="radio" id="checklistGoSend_yes" name="checklistGoSend" value="yes"><label for="checklistGoSend_yes">Yes</label>
                            <input type="radio" id="checklistGoSend_no" name="checklistGoSend" value="no"><label for="checklistGoSend_no">No</label>
                            <input type="radio" id="checklistGoSend_na" name="checklistGoSend" value="na"><label for="checklistGoSend_na">N/A</label>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <div class="sidebar-footer">
        </div>
    </div>
    <div class="sidebar-overlay" id="checklist-sidebar-overlay"></div>
    
    <div id="historySidebar" class="history-sidebar">
        <div class="sidebar-header">
            <h3>Note History</h3>
            <button type="button" class="close-sidebar-btn" id="closeHistoryBtn">
                <svg viewBox="0 0 24 24" width="18" height="18" stroke="currentColor" stroke-width="2" fill="none" stroke-linecap="round" stroke-linejoin="round"><line x1="18" y1="6" x2="6" y2="18"></line><line x1="6" y1="6" x2="18" y2="18"></line></svg>
            </button>
        </div>
        <div class="history-search-container">
            <input type="text" id="historySearchInput" placeholder="Search by BAN, CID, CBR or Ticket..." autocomplete="off">
        </div>
        <div class="note-history-list" id="noteHistoryList">
            <p class="no-notes-message" id="noNotesMessage">No saved notes yet.</p>
        </div>
        <div id="historyactionsfooter" class="history-actions-footer">
            <button type="button" id="exportBtn" class="history-footer-btn export-btn">
                <svg xmlns="http://www.w3.org/2000/svg" width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"/><polyline points="7 10 12 15 17 10"/><line x1="12" y1="15" x2="12" y2="3"/></svg>
                <span>EXPORTAR</span>
            </button>
            <button type="button" id="importBtn" class="history-footer-btn import-btn">
                <svg xmlns="http://www.w3.org/2000/svg" width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"/><polyline points="17 8 12 3 7 8"/><line x1="12" y1="3" x2="12" y2="15"/></svg>
                <span>IMPORTAR</span>
            </button>
            <input type="file" id="importFile" class="hidden-file-input" accept="application/json">
        </div>
        </div>
    <div class="sidebar-overlay" id="history-sidebar-overlay"></div>

    <div id="feedback-widget">
        <div class="feedback-tooltip">Have an idea to improve the app? Send it here!</div>
        <button type="button" id="feedback-btn" title="Send Feedback">
            <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z"></path></svg>
        </button>
    </div>
    
    <footer class="app-footer">
        <p style=" margin-top: 2px; margin-bottom: 2px;" >TELUS FFH PURE FIBER Tech Support | x331671 | Alex Van Houtven | June 2025</p>
    </footer>

    <div id="custom-tutorial-overlay" class="hidden"></div>
    <div id="custom-tutorial-popover" class="hidden">
        <div id="tutorial-popover-title"></div>
        <div id="tutorial-popover-text"></div>
        <div class="tutorial-popover-actions">
            <button id="tutorial-prev-btn">Anterior</button>
            <button id="tutorial-next-btn">Siguiente</button>
            <button id="tutorial-done-btn">Finalizar</button>
        </div>
    </div>

    <div id="info-overlay-container">
        <button type="button" id="info-overlay-trigger">
            <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="10"></circle><line x1="12" y1="16" x2="12" y2="12"></line><line x1="12" y1="8" x2="12.01" y2="8"></line></svg>
        </button>

        <div id="info-overlay-backdrop"></div>

        <div id="info-overlay-panel">
            <div class="info-overlay-header">
                <h3>Información Adicional</h3>
                <button type="button" id="info-overlay-close">
                    <svg viewBox="0 0 24 24" width="20" height="20" stroke="currentColor" stroke-width="2" fill="none" stroke-linecap="round" stroke-linejoin="round"><line x1="18" y1="6" x2="6" y2="18"></line><line x1="6" y1="6" x2="18" y2="18"></line></svg>
                </button>
            </div>
            <div class="info-overlay-content">
                <p>Aquí se mostrará la información relevante.</p>
                <p>Puedes actualizar este contenido dinámicamente.</p>
            </div>
        </div>
    </div>



<!-- Contenedor para los Pop-ups -->
<div id="shortkey-popup-container">
    <div id="shortkey-search-popup" class="shortkey-popup"></div>
    <div id="shortkey-interaction-popup" class="shortkey-popup"></div>
</div>

<!-- Interfaz de usuario (Modal) para gestionar Shortkeys -->
<div id="settingsModal">
    <div id="modalOverlay"></div>
    <div class="modal-container">
        <div class="modal-header">
            <h3>Configuración de Shortkeys</h3>
            <button id="closeSettingsBtn" title="Cerrar">&times;</button>
        </div>
        <div class="modal-body">
            <div id="view-list">
                <div class="list-header">
                    <h4>Shortkeys Guardados</h4>
                    <button id="add-new-shortkey-btn" class="main-button">Añadir Nuevo</button>
                </div>
                <div id="shortcutsList"></div>
            </div>

            <div id="view-editor" class="hidden">
                <form id="shortkey-editor-form">
                    <div class="editor-content">
                        <!-- Activador (Fijo) -->
                        <div class="editor-section sticky-header">
                            <label for="editor-key">Activador</label>
                            <div class="input-with-prefix">
                                <span>@</span>
                                <input type="text" id="editor-key" class="no-spaces" placeholder="nombre-del-shortkey" required>
                            </div>
                        </div>

                        <!-- Editor de Etiquetas -->
                        <div class="editor-section">
                            <label for="editor-tags-input">Etiquetas</label>
                            <div class="tags-editor-wrapper">
                                <div id="tags-container" class="tags-container">
                                    <!-- Las píldoras de etiquetas se insertarán aquí -->
                                </div>
                                <input type="text" id="editor-tags-input" placeholder="Añade una etiqueta y presiona Enter">
                                <div id="existing-tags-container" class="existing-tags">
                                    <small>Etiquetas existentes:</small>
                                    <!-- Las etiquetas existentes se mostrarán aquí -->
                                </div>
                            </div>
                        </div>

                        <!-- Vista para Shortkey Simple -->
                        <div id="simple-mode-view">
                            <div class="editor-section">
                                <label for="editor-description">Texto de reemplazo</label>
                                <textarea id="editor-description" placeholder="Escribe el texto que se insertará..." rows="3"></textarea>
                            </div>
                        </div>

                        <!-- Vista para Shortkey Dinámico (con variables) -->
                        <div id="dynamic-mode-view" class="hidden">
                             <div class="dynamic-controls">
                                <div id="steps-container"></div>
                                <div id="template-step-container"></div>
                            </div>
                            <div id="live-preview-container">
                                <div class="editor-section">
                                    <label>Vista Previa</label>
                                    <div id="live-preview-output" class="preview-output" style="padding-top: 14px;"></div>
                                </div>
                            </div>
                        </div>
                    </div>
                    
                    <!-- Acciones Fijas -->
                    <div class="editor-actions-sticky">
                         <button type="button" id="add-select-step-btn" class="main-button hidden">+ Añadir Variable</button>
                         <div class="editor-actions-right">
                            <button type="button" id="editor-cancel-btn">Cancelar</button>
                            <button type="submit" id="editor-save-btn">Guardar Shortkey</button>
                        </div>
                    </div>
                </form>
            </div>
        </div>
    </div>
</div>

<!-- Modal de Confirmación para Salir sin Guardar -->
<div id="confirm-modal" class="confirm-modal-overlay hidden">
    <div class="confirm-modal-dialog">
        <h4>Cambios sin guardar</h4>
        <p>Parece que has hecho cambios. ¿Qué te gustaría hacer?</p>
        <div class="confirm-modal-actions">
            <button id="confirm-cancel-btn" class="modal-action-btn btn-secondary">Cancelar</button>
            <button id="confirm-discard-btn" class="modal-action-btn btn-danger">Salir sin guardar</button>
            <button id="confirm-save-btn" class="modal-action-btn btn-success">Guardar y Salir</button>
        </div>
    </div>
</div>

<!-- === SECCIÓN DE PLANTILLAS === -->

<!-- Plantilla para una Píldora de Etiqueta -->
<template id="template-tag-pill">
    <span class="tag-pill">
        <span class="tag-pill-text"></span>
        <button type="button" class="remove-tag-btn" title="Eliminar etiqueta">&times;</button>
    </span>
</template>

<!-- Plantilla para el paso de Selección (Variable) -->
<template id="template-step-select">
    <div class="step-container" data-step-type="select">
        <div class="step-header">
            <span class="step-title">Variable</span>
            <button type="button" class="remove-step-btn" title="Eliminar variable">&times;</button>
        </div>
        <div class="step-body">
            <input type="text" class="step-input no-spaces" data-config="id" placeholder="ID_de_la_variable">
            <div class="options-container"></div>
            <button type="button" class="add-option-btn">+ Añadir opción</button>
        </div>
    </div>
</template>
    
<!-- Plantilla para una Opción dentro de una Variable -->
<template id="template-step-option">
    <div class="option-item">
        <div class="option-reorder">
            <button type="button" class="action-btn move-option-up-btn" title="Mover opción arriba">
                <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="2.5" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" d="M4.5 15.75l7.5-7.5 7.5 7.5" /></svg>
            </button>
            <button type="button" class="action-btn move-option-down-btn" title="Mover opción abajo">
                <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="2.5" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" d="M19.5 8.25l-7.5 7.5-7.5-7.5" /></svg>
            </button>
        </div>
        <input type="text" class="step-input no-spaces" data-config="label" placeholder="Texto_a_mostrar">
        <textarea class="step-input step-textarea-flexible" data-config="value" placeholder="Valor a guardar" rows="1"></textarea>
        <input type="text" class="step-input" data-config="nextStep" placeholder="Siguiente paso (ID o 'result')">
        <button type="button" class="remove-option-btn" title="Eliminar opción">&times;</button>
    </div>
</template>

<!-- Plantilla para el Texto Final -->
<template id="template-step-template">
    <div class="step-container" data-step-type="template">
        <div class="step-header">
            <span class="step-title">Plantilla de Texto Final</span>
        </div>
        <div class="step-body">
            <input type="hidden" class="step-input" data-config="id" value="result" readonly>
            <textarea class="step-textarea" data-config="template" placeholder="Texto final. Usa {id_variable} para insertar valores."></textarea>
        </div>
    </div>
</template>





    <script src="https://unpkg.com/dexie@latest/dist/dexie.js"></script>
    <script type="module" src="js/main.js"></script>
    <script src="shortkey/shortkey.js"></script>
    </body>
</html>

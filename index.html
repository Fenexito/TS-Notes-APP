<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>APad - NoteApp</title>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/driver.js@1.3.1/dist/driver.css"/>
    <link rel="stylesheet" href="style.css">
   
    <!-- Web Application Manifest -->
    <link rel="manifest" href="/manifest.json">
    
    <!-- Meta tags for iOS/Safari -->
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black">
    <meta name="apple-mobile-web-app-title" content="APad Notes">
    <link rel="apple-touch-icon" href="/icons/icon-192x192.png">
    
</head>
<body>
    <div class="container">

        <div class="sticky-header-container">
            <div class="header-top-row">
                <div class="title-container">
                    <button type="button" id="btnChecklistMenu" class="menu-toggle-btn">
                        <svg viewBox="0 0 24 24" width="20" height="20" stroke="currentColor" stroke-width="2" fill="none" stroke-linecap="round" stroke-linejoin="round"><line x1="3" y1="12" x2="21" y2="12"></line><line x1="3" y1="6" x2="21" y2="6"></line><line x1="3" y1="18" x2="21" y2="18"></line></svg>
                    </button>
                    <h1 class="ts-notes-title">APad | NoteApp</h1>
                    <span class="app-version" id="appVersionDisplay">v.X.Y</span>
                </div>
                <div id="topactions" class="top-actions">
                    <button type="button" id="btnSee">
                        <svg viewBox="0 0 24 24" width="20" height="20" stroke="currentColor" stroke-width="2" fill="none" stroke-linecap="round" stroke-linejoin="round"><path d="M1 12s4-8 11-8 11 8 11 8-4 8-11 8-11-8-11-8z"></path><circle cx="12" cy="12" r="3"></circle></svg>
                        <span>SEE</span>
                    </button>
                    <button type="button" id="btnSave">
                        <svg viewBox="0 0 24 24" width="20" height="20" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M19 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11l5 5v11a2 2 0 0 1-2 2z"/><polyline points="17 21 17 13 7 13 7 21"/><polyline points="7 3 7 8 15 8"/></svg>
                        <span>SAVE</span>
                    </button>
                    <button type="button" id="btnReset">
                        <svg viewBox="0 0 24 24" width="20" height="20" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.76 2.75L3 8"/><path d="M3 3v5h5"/></svg>
                        <span>RESET</span>
                    </button>
                    <button type="button" id="btnHistory">
                        <svg viewBox="0 0 24 24" width="20" height="20" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M12 2v8l4 4"/><circle cx="12" cy="12" r="10"/></svg>
                        <span>HISTORY</span>
                    </button>
                </div>
            </div>
            <div id="headerDynamicInfo" class="header-dynamic-info">
                <div class="dynamic-field-item">
                    <span class="header-field-display">BAN: <span id="headerBan-value"></span></span>
                    <button type="button" class="copy-button-sticky" data-target-id="ban">
                        <svg viewBox="0 0 24 24" width="13" height="13" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><rect width="14" height="14" x="8" y="8" rx="2" ry="2"/><path d="M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2v2"/></svg>
                    </button>
                </div>
                <div class="dynamic-field-item">
                    <span class="header-field-display">CID: <span id="headerCid-value"></span></span>
                    <button type="button" class="copy-button-sticky" data-target-id="cid">
                        <svg viewBox="0 0 24 24" width="14" height="14" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><rect width="14" height="14" x="8" y="8" rx="2" ry="2"/><path d="M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2v2"/></svg>
                    </button>
                </div>
                <div class="dynamic-field-item">
                    <span class="header-field-display">NAME: <span id="headerName-value"></span></span>
                </div>
                <div class="dynamic-field-item">
                    <span class="header-field-display">CBR: <span id="headerCbr-value"></span></span>
                    <button type="button" class="copy-button-sticky" data-target-id="cbr">
                        <svg viewBox="0 0 24 24" width="14" height="14" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><rect width="14" height="14" x="8" y="8" rx="2" ry="2"/><path d="M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2v2"/></svg>
                    </button>
                </div>
            </div>
        </div>
        <div id="agentinfo" class="agent-info">
            <label for="agentName">AGENT:</label>
            <div class="input-with-edit-button">
                <input type="text" id="agentName" name="agentName" value="Agent Name" readonly required autocomplete="off">
                <button type="button" id="editAgentNameBtn" class="edit-button">
                    <svg class="edit-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M17 3a2.828 2.828 0 0 1 4 4L7.5 20.5 2 22l1.5-5.5L17 3z"></path></svg>
                </button>
                <span id="mainNoteCharCountHeader" class="char-counter">0</span>
            </div>
            <div class="skill-toggle-container">
                <span id="skill-text-indicator" class="skill-text-indicator">FFH</span>
                <label class="skill-toggle-switch">
                    <input type="checkbox" id="skillToggle">
                    <span class="slider"></span>
                </label>
            </div>
        </div>
        <form id="callNoteForm">
            <section id="seccion1" class="form-section">
                <h2 class="section-title">
                    <span>Account Info & Verification</span>
                    <button type="button" class="clean-section-btn" data-section-id="seccion1" title="Clear section">
                        <svg viewBox="0 0 24 24" width="16" height="16" stroke="currentColor" stroke-width="2" fill="none" stroke-linecap="round" stroke-linejoin="round"><path d="M3 6l3 0l0 18l12 0l0-18l3 0"></path><path d="M1 6l22 0"></path><path d="M8 6l0-3l8 0l0 3"></path></svg>
                    </button>
                </h2>
                <div class="section-content">
                    <div class="input-row four-columns">
                        <div class="input-group">
                            <label for="ban">BAN</label>
                            <div class="input-with-copy-button">
                                <input type="text" id="ban" name="ban" inputmode="numeric" pattern="[0-9]*" required autocomplete="off">
                                <button type="button" class="copy-button" data-target="ban" title="Copy BAN">
                                    <svg xmlns="http://www.w3.org/2000/svg" width="11" height="11" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><rect width="14" height="14" x="8" y="8" rx="2" ry="2"/><path d="M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2v2"/></svg>
                                </button>
                            </div>
                        </div>
                        <div class="input-group">
                            <label for="cid">CID</label>
                            <div class="input-with-copy-button">
                                <input type="text" id="cid" name="cid" inputmode="numeric" pattern="[0-9]*" required autocomplete="off">
                                <button type="button" class="copy-button" data-target="cid" title="Copy CID">
                                    <svg xmlns="http://www.w3.org/2000/svg" width="11" height="11" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><rect width="14" height="14" x="8" y="8" rx="2" ry="2"/><path d="M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2v2"/></svg>
                                </button>
                            </div>
                        </div>
                        <div class="input-group">
                            <label for="name">NAME</label>
                            <input type="text" id="name" name="name" pattern="[A-Za-z\s]*" required autocomplete="name-off">
                        </div>
                        <div class="input-group">
                            <label for="cbr">CBR</label>
                            <div class="input-with-copy-button">
                                <input type="text" id="cbr" name="cbr" inputmode="numeric" pattern="[0-9]*" required autocomplete="off">
                                <button type="button" class="copy-button" data-target="cbr" title="Copy CBR">
                                    <svg xmlns="http://www.w3.org/2000/svg" width="11" height="11" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><rect width="14" height="14" x="8" y="8" rx="2" ry="2"/><path d="M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2v2"/></svg>
                                </button>
                            </div>
                        </div>
                    </div>
                    <div class="input-row account-info-row">
                        <div class="input-group">
                            <label for="caller">CALLER</label>
                            <select id="caller" name="caller" required>
                                <option value="">Select an option</option>
                                <option value="Owner">Owner</option>
                                <option value="Auth User">Auth User</option>
                                <option value="Consultation">Consultation</option>
                                <option value="Other">Other</option>
                            </select>
                        </div>
                        <div class="input-group">
                            <label for="verifiedBy">VERIFIED BY</label>
                            <select id="verifiedBy" name="verifiedBy" required>
                                <option value="">Select an option</option>
                                <option value="PIN">PIN</option>
                                <option value="IVR">IVR</option>
                                <option value="Security Questions">Security Questions</option>
                                <option value="Manual Auth">Manual Auth</option>
                                <option value="By Previous Agent">By Previous Agent</option>
                                <option value="N/Refuses to Verify">N/Refuses to Verify</option>
                                <option value="N/Missing Info">N/Missing Info</option>
                                <option value="N/Not Owner or Auth User">N/Not Owner or Auth User</option>
                                <option value="Not Required">Not Required</option>
                            </select>
                        </div>
                        <div class="input-group">
                            <label for="address">ADDRESS</label>
                            <input type="text" id="address" name="address" autocomplete="address-off">
                        </div>
                        <div id="xidFieldContainer" class="input-group hidden-field">
                            <label for="xid">XID</label>
                            <input type="text" id="xid" name="xid" required autocomplete="off">
                        </div>
                    </div>
                </div>
            </section>
            <section id="seccion2" class="form-section">
                <h2 class="section-title">
                    <span>Status, Issue and Troubleshoot Steps</span>
                    <button type="button" class="clean-section-btn" data-section-id="seccion2" title="Clear section">
                        <svg viewBox="0 0 24 24" width="16" height="16" stroke="currentColor" stroke-width="2" fill="none" stroke-linecap="round" stroke-linejoin="round"><path d="M3 6l3 0l0 18l12 0l0-18l3 0"></path><path d="M1 6l22 0"></path><path d="M8 6l0-3l8 0l0 3"></path></svg>
                    </button>
                </h2>
                <div class="section-content section2-grid-layout">
                    <div class="input-row radio-group-row">
                        <div class="input-group radio-group" id="outageRadioGroup">
                            <label>Outage</label>
                            <div class="radio-options">
                                <input type="radio" id="outageYes" name="outage" value="yes">
                                <label for="outageYes">Yes</label>
                                <input type="radio" id="outageNo" name="outage" value="no">
                                <label for="outageNo">No</label>
                            </div>
                        </div>
                        <div class="input-group radio-group" id="errorsInNCRadioGroup">
                            <label>NetCracker</label>
                            <div class="radio-options">
                                <input type="radio" id="errorsInNCYes" name="errorsInNC" value="yes">
                                <label for="errorsInNCYes">Yes</label>
                                <input type="radio" id="errorsInNCNo" name="errorsInNC" value="no">
                                <label for="errorsInNCNo">No</label>
                            </div>
                        </div>
                        <div class="input-group radio-group" id="accountSuspendedRadioGroup">
                            <label>Suspended</label>
                            <div class="radio-options">
                                <input type="radio" id="accountSuspendedYes" name="accountSuspended" value="yes">
                                <label for="accountSuspendedYes">Yes</label>
                                <input type="radio" id="accountSuspendedNo" name="accountSuspended" value="no">
                                <label for="accountSuspendedNo">No</label>
                            </div>
                        </div>
                    </div>
                    <div class="input-row three-columns-layout">
                        <div class="input-group" id="serviceOnCsrGroup">
                            <label for="serviceOnCsr">SERVICE ON CSR</label>
                            <select id="serviceOnCsr" name="serviceOnCsr" required>
                                <option value="">Select Status</option>
                                <option value="Active">Active</option>
                                <option value="Pending">Pending</option>
                                <option value="Activating">Activating</option>
                                <option value="Suspended">Suspended</option>
                                <option value="Cancelled">Cancelled</option>
                            </select>
                        </div>
                        <div class="input-group">
                            <label for="serviceSelect">SERVICE</label>
                            <select id="serviceSelect" name="serviceSelect" required>
                                <option value="">Select a service</option>
                                <option value="HighSpeed / Fiber">HighSpeed / Fiber</option>
                                <option value="HighSpeed / Copper">HighSpeed / Copper</option>
                                <option value="Optik TV (Legacy)">Optik TV (Legacy)</option>
                                <option value="Optik TV (Evo)">Optik TV (Evo)</option>
                                <option value="Pik TV">Pik TV</option>
                                <option value="HomePhone / Fiber">HomePhone / Fiber</option>
                                <option value="HomePhone / Copper">HomePhone / Copper</option>
                                <option value="Telus Email">Telus Email</option>
                                <option value="MyTelus">MyTelus</option>
                                <option value="TOS">TOS</option>
                                <option value="Telus Connect App">Telus Connect App</option>
                                <option value="SHS Legacy">SHS Legacy</option>
                                <option value="SHS ADT / Acquisition / Custom Home">SHS ADT / Acquisition / Custom Home</option>
                                <option value="Living Well Companion">Living Well Companion</option>
                                <option value="Other">Other</option>
                            </select>
                        </div>
                        <div class="input-group">
                            <label for="issueSelect">WORKFLOW</label>
                            <select id="issueSelect" name="issueSelect" required disabled>
                                <option value="">Select an issue</option>
                            </select>
                        </div>
                    </div>
                    <div class="input-row three-columns-layout">
                        <div class="input-group wide-column">
                            <label for="cxIssueText">CX ISSUE</label>
                            <textarea id="cxIssueText" name="cxIssueText" rows="4" required autocomplete="off"></textarea>
                        </div>
                        <div class="input-group narrow-column">
                            <label for="additionalinfoText">ADDITIONAL INFO</label>
                            <textarea id="additionalinfoText" name="additionalinfoText" rows="4" autocomplete="off"></textarea>
                        </div>
                    </div>
                    <div class="input-row" id="affectedTextRow" style="display: none;">
                        <div class="input-group full-width">
                            <label for="affectedText" id="affectedLabel">AFFECTED</label>
                            <textarea id="affectedText" name="affectedText" autocomplete="off"></textarea>
                        </div>
                    </div>
                    <div class="input-row four-columns-layout" id="physicalCheckListsContainer">
                        <div class="input-group physical-check-item-with-label-above">
                            <label for="physicalCheckList1Select" id="physicalCheckList1Label">ONT/GATEWAY</label>
                            <select id="physicalCheckList1Select" name="physicalCheckList1" required>
                                <option value="">Select an option</option>
                            </select>
                        </div>
                        <div class="input-group physical-check-item">
                            <label for="physicalCheckList2Select" id="physicalCheckList2Label">MODEM/GATEWAY</label>
                            <div class="checkbox-and-select-wrapper">
                                <input type="checkbox" id="enablePhysicalCheck2" class="physical-check-toggle">
                                <select id="physicalCheckList2Select" name="physicalCheckList2" disabled>
                                    <option value="">Select an option</option>
                                </select>
                            </div>
                        </div>
                        <div class="input-group physical-check-item">
                            <label for="physicalCheckList3Select" id="physicalCheckList3Label">BOOSTER/EXTENDER</label>
                            <div class="checkbox-and-select-wrapper">
                                <input type="checkbox" id="enablePhysicalCheck3" class="physical-check-toggle">
                                <select id="physicalCheckList3Select" name="physicalCheckList3" disabled>
                                    <option value="">Select an option</option>
                                </select>
                            </div>
                        </div>
                        <div class="input-group physical-check-item">
                            <label for="physicalCheckList4Select" id="physicalCheckList4Label">EXTRA BOOSTER</label>
                            <div class="checkbox-and-select-wrapper">
                                <input type="checkbox" id="enablePhysicalCheck4" class="physical-check-toggle">
                                <select id="physicalCheckList4Select" name="physicalCheckList4" disabled>
                                    <option value="">Select an option</option>
                                </select>
                            </div>
                        </div>
                    </div>
                    <div class="input-row three-columns-layout" id="optikTvLegacySpecificFields" style="display: none;">
                        <div class="input-group">
                            <label for="xVuStatusSelect" id="xVuStatusLabel">xVu STATUS</label>
                            <select id="xVuStatusSelect" name="xVuStatus" disabled></select>
                        </div>
                        <div class="input-group">
                            <label for="packetLossSelect" id="packetLossLabel">PACKET LOSS</label>
                            <select id="packetLossSelect" name="packetLoss" disabled></select>
                        </div>
                    </div>
                    <div class="input-row">
                        <div class="input-group full-width">
                            <label for="troubleshootingProcessText" class="label-with-right-aligned-counter">
                                <span>TROUBLESHOOTING PROCESS</span>
                                <span id="troubleshootingCharCount" class="char-counter">0</span>
                            </label>
                            <textarea id="troubleshootingProcessText" name="troubleshootingProcessText" rows="6" required autocomplete="off"></textarea>
                        </div>
                    </div>
                    <div class="input-row links-row">
                        <div class="input-group go-link-group">
                            <p>Always use <a href="http://go/checkphysical" target="_blank" id="goCheckPhysicalLink" rel="noopener noreferrer"><strong>GO/CHECKPHYSICAL</strong></a></p>
                        </div>
                        <div class="input-group go-link-group">
                            <p>Always use <a href="http://go/tscopilot" target="_blank" id="goTsCopilotLink" rel="noopener noreferrer"><strong>GO/TSCOPILOT</strong></a></p>
                        </div>
                    </div>
                </div>
            </section>
            <section id="seccion3" class="form-section">
                <h2 class="section-title">
                    <span>Advanced Wifi Analytics & TVS</span>
                    <button type="button" class="clean-section-btn" data-section-id="seccion3" title="Clear section">
                        <svg viewBox="0 0 24 24" width="16" height="16" stroke="currentColor" stroke-width="2" fill="none" stroke-linecap="round" stroke-linejoin="round"><path d="M3 6l3 0l0 18l12 0l0-18l3 0"></path><path d="M1 6l22 0"></path><path d="M8 6l0-3l8 0l0 3"></path></svg>
                    </button>
                </h2>
                <div class="section-content">
                    <div class="input-row three-columns-layout">
                        <div class="input-group">
                            <label for="awaAlertsSelect">AWA ALERTS</label>
                            <select id="awaAlertsSelect" name="awaAlerts" required>
                                <option value="">Select an option</option>
                            </select>
                        </div>
                        <div class="input-group physical-check-item">
                            <label for="awaAlerts2Select">AWA ALERTS 2</label>
                            <div class="checkbox-and-select-wrapper">
                                <input type="checkbox" id="enableAwaAlerts2" class="physical-check-toggle">
                                <select id="awaAlerts2Select" name="awaAlerts2" disabled>
                                    <option value="">Select an option</option>
                                </select>
                            </div>
                        </div>
                        <div class="input-group">
                            <label for="awaStepsSelect">AWA STEPS</label>
                            <select id="awaStepsSelect" name="awaSteps" disabled>
                                <option value="">Select an option</option>
                            </select>
                        </div>
                    </div>
                    <div class="input-row download-upload-row four-columns-layout">
                        <div class="input-group">
                            <label for="downloadBeforeInput">DL BEFORE</label>
                            <input type="text" id="downloadBeforeInput" name="downloadBefore" autocomplete="off">
                        </div>
                        <div class="input-group">
                            <label for="uploadBeforeInput">UP BEFORE</label>
                            <input type="text" id="uploadBeforeInput" name="uploadBefore" autocomplete="off">
                        </div>
                        <div class="input-group">
                            <label for="downloadAfterInput">DL AFTER</label>
                            <input type="text" id="downloadAfterInput" name="downloadAfter" autocomplete="off">
                        </div>
                        <div class="input-group">
                            <label for="uploadAfterInput">UP AFTER</label>
                            <input type="text" id="uploadAfterInput" name="uploadAfter" autocomplete="off">
                        </div>
                    </div>
                    <div class="input-row three-columns-layout">
                        <div class="input-group awa-devices-group">
                            <label>ACTIVE/TOTAL DEVICES</label>
                            <div class="active-total-inputs">
                                <input type="text" id="activeDevicesInput" name="activeDevices" placeholder="Active" autocomplete="off">
                                <span class="separator">/</span>
                                <input type="text" id="totalDevicesInput" name="totalDevices" placeholder="Total" autocomplete="off">
                            </div>
                        </div>
                        <div class="input-group">
                            <label for="tvsSelect">TVS</label>
                            <select id="tvsSelect" name="tvsSelect" required>
                                <option value="">Select an option</option>
                                <option value="YES">YES</option>
                                <option value="NO / Offered but Cx refuses">NO / Offered but Cx refuses</option>
                                <option value="NO / Offered but Cx don't have internet">NO / Offered but Cx don't have internet</option>
                                <option value="NO / Offered but Cx don't have smartphone">NO / Offered but Cx don't have smartphone</option>
                                <option value="NO / Offered but Cx can't open SMS / Link">NO / Offered but Cx can't open SMS / Link</option>
                                <option value="NO / Cx not at home">NO / Cx not at home</option>
                                <option value="Not needed for this interaction">Not needed for this interaction</option>
                            </select>
                        </div>
                        <div class="input-group" id="tvsKeyFieldContainer" style="display: none;">
                            <label for="tvsKeyInput">TVS KEY</label>
                            <input type="text" id="tvsKeyInput" name="tvsKeyInput" autocomplete="off">
                        </div>
                    </div>
                    <div class="input-row">
                        <div class="input-group full-width">
                            <label for="extraStepsSelect">EXTRA STEPS</label>
                            <select id="extraStepsSelect" name="extraStepsSelect">
                                <option value="">Select an option</option>
                            </select>
                        </div>
                    </div>
                </div>
            </section>
            <section id="seccion4" class="form-section">
                <h2 class="section-title">
                    <span>Resolution</span>
                    <button type="button" class="clean-section-btn" data-section-id="seccion4" title="Clear section">
                        <svg viewBox="0 0 24 24" width="16" height="16" stroke="currentColor" stroke-width="2" fill="none" stroke-linecap="round" stroke-linejoin="round"><path d="M3 6l3 0l0 18l12 0l0-18l3 0"></path><path d="M1 6l22 0"></path><path d="M8 6l0-3l8 0l0 3"></path></svg>
                    </button>
                </h2>
                <div class="section-content">
                    <div class="input-row three-columns-layout">
                        <div class="input-group">
                            <label for="resolvedSelect">RESOLVED</label>
                            <select id="resolvedSelect" name="resolvedSelect" required>
                                <option value="">Select an option</option>
                                <option value="Yes | EOC">Yes | EOC</option>
                                <option value="No | Tech Booked">No | Tech Booked</option>
                                <option value="No | Follow Up Required">No | Follow Up Required</option>
                                <option value="No | Follow Up Required | Set SCB with FVA">No | Follow Up Required | Set SCB with FVA</option>
                                <option value="No | BOSR Created">No | BOSR Created</option>
                                <option value="No | NC Ticket Created">No | NC Ticket Created</option>
                                <option value="Cx ask for a Manager | Unable to de escalate. Manager still needed | Escalate to EMT">Cx ask for a Manager | Unable to de escalate. Manager still needed | Escalate to EMT</option>
                                <option value="Cx need to be transfered">Cx need to be transfered</option>
                            </select>
                        </div>
                        <div class="input-group physical-check-item">
                            <label for="transferSelect">TRANSFER</label>
                            <div class="checkbox-and-select-wrapper">
                                <input type="checkbox" id="transferCheckbox" class="physical-check-toggle">
                                <select id="transferSelect" name="transferSelect" disabled>
                                    <option value="">Select an option</option>
                                </select>
                            </div>
                        </div>
                        <div class="input-group">
                            <label for="csrOrderInput">CSR ORDER</label>
                            <input type="text" id="csrOrderInput" name="csrOrderInput" inputmode="numeric" pattern="[0-9]*" autocomplete="off">
                        </div>
                    </div>
                    <div class="input-row three-columns-layout">
                        <div class="input-group" id="aocFieldContainer" style="display: none;">
                            <label for="aocInput">AOC</label>
                            <input type="text" id="aocInput" name="aocInput" readonly autocomplete="off">
                        </div>
                        <div class="input-group" id="dispatchDateInputContainer" style="display: none;">
                            <label for="dispatchDateInput" id="dispatchDateLabel">DISPATCH DATE</label>
                            <input type="date" id="dispatchDateInput" name="dispatchDateInput" autocomplete="off">
                        </div>
                        <div class="input-group" id="dispatchTimeSlotSelectContainer" style="display: none;">
                            <label for="dispatchTimeSlotSelect" id="dispatchTimeLabel">DISPATCH TIME</label>
                            <select id="dispatchTimeSlotSelect" name="dispatchTimeSlotSelect">
                                <option value="">Select an option</option>
                            </select>
                        </div>
                    </div>
                    <div class="input-row two-columns-dynamic-cbr2-ticket">
                        <div class="input-group" id="cbr2FieldContainer" style="display: none;">
                            <label for="cbr2Input" id="cbr2Label">CBR2</label>
                            <input type="text" id="cbr2Input" name="cbr2Input" autocomplete="off">
                        </div>
                        <div class="input-group flex-grow-ticket">
                            <label for="ticketInput">TICKET</label>
                            <div class="input-with-copy-button">
                                <input type="text" id="ticketInput" name="ticketInput" inputmode="numeric" pattern="[0-9]*" required autocomplete="off">
                                <button type="button" class="copy-button" data-target="ticketInput" title="Copy Ticket">
                                    <svg xmlns="http://www.w3.org/2000/svg" width="11" height="11" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><rect width="14" height="14" x="8" y="8" rx="2" ry="2"/><path d="M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2v2"/></svg>
                                </button>
                            </div>
                        </div>
                    </div>
                </div>
            </section>
            </form>
    </div>

    <!-- Welcome Modal -->
    <div id="welcomeModalOverlay" class="modal-overlay" style="display:none;">
        <div class="modal-content small-modal">
            <div class="modal-header">
                <h3>Welcome to APad</h3>
            </div>
            <div class="modal-body">
                <p>This application helps you take technical support call notes efficiently and organized.</p>
                <p><strong>Creator:</strong> x331671 | Alex Van Houtven | FFH PureFiber TS</p>
                <p><strong>Current Version:</strong> <span id="welcomeAppVersionDisplay">Loading...</span></p>
                <div class="input-group">
                    <label for="welcomeAgentNameInput">Enter your name (it will appear in your notes):</label>
                    <input type="text" id="welcomeAgentNameInput" placeholder="Your agent name" required autocomplete="off">
                </div>
            </div>
            <div class="modal-actions-confirm">
                <button type="button" id="startTakingNotesBtn" class="modal-action-btn copy-btn-style">START</button>
            </div>
        </div>
    </div>
    
    <div id="noteModalOverlay" class="modal-overlay" style="display:none">
        <div class="modal-content large-modal">
            <div class="modal-header">
                <h2>
                    Final Note
                    <div class="modal-char-counter-display">
                        <span id="modalNoteCharCount" class="char-counter">0</span>
                    </div>
                </h2>
                <button type="button" class="close-modal-btn" id="modalCloseBtn">
                    <svg viewBox="0 0 24 24" width="20" height="20" stroke="currentColor" stroke-width="2" fill="none" stroke-linecap="round" stroke-linejoin="round"><line x1="18" y1="6" x2="6" y2="18"></line><line x1="6" y1="6" x2="18" y2="18"></line></svg>
                </button>
            </div>
            <div class="modal-body">
                <textarea id="modalNoteTextarea" rows="20" readonly autocomplete="off"></textarea>
            </div>
            <div class="modal-actions">
                <button type="button" class="modal-action-btn copy-btn-style" id="modalCopyBtn">
                    <svg viewBox="0 0 24 24" width="20" height="20" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><rect width="14" height="14" x="8" y="8" rx="2" ry="2"/><path d="M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2v2"/></svg>
                    COPY
                </button>
                <button type="button" class="modal-action-btn edit-btn-style" id="modalEditFromHistoryBtn" style="display: none;">
                    <svg viewBox="0 0 24 24" width="20" height="20" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7"></path><path d="M18.5 2.5a2.121 2.000 0 0 1 3 3L12 15l-4 1 1-4 9.5-9.5z"></path></svg>
                    EDIT
                </button>
                <button type="button" class="modal-action-btn separate-btn-style" id="modalSeparateBtn">
                    <svg viewBox="0 0 24 24" width="20" height="20" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M12 2h6a2 2 0 0 1 2 2v16a2 2 0 0 1-2 2h-6"/><path d="M6 2h6v20H6a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2z"/></svg>
                    SPLIT
                </button>
                <button type="button" class="modal-action-btn copy-save-btn-style" id="modalCopySaveBtn">
                    <svg viewBox="0 0 24 24" width="20" height="20" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M12 15H4a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h10a2 2 0 0 1 2 2v1H18a2 2 0 0 1 2 2v10a2 2 0 0 1-2 2h-5"/><path d="m8 7 2 2 4-4"/><path d="M18 7v6h-6"/></svg>
                    COPY & SAVE
                </button>
                <button type="button" class="modal-action-btn edit-btn-style" id="modalResolutionBtn">
                    <svg viewBox="0 0 24 24" width="20" height="20" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M9 11l3 3L22 4"/><path d="M21 12v7a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11"/></svg>
                    RESOLUTION
                </button>
                <button type="button" class="modal-action-btn" id="modalCopilotBtn">
                    <svg viewBox="0 0 24 24" width="20" height="20" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M12 8V4H8"/><rect width="16" height="12" x="4" y="8" rx="2"/><path d="M2 14h2"/><path d="M20 14h2"/><path d="M15 13v2"/><path d="M9 13v2"/></svg>
                    COPILOT
                </button>
                <button type="button" class="modal-action-btn close-btn-style" id="modalCloseBtnBottom">
                    <svg viewBox="0 0 24 24" width="20" height="20" stroke="currentColor" stroke-width="2" fill="none" stroke-linecap="round" stroke-linejoin="round"><line x1="18" y1="6" x2="6" y2="18"></line><line x1="6" y1="6" x2="18" y2="18"></line></svg>
                    CLOSE
                </button>
            </div>
        </div>
    </div>

    <div id="separateNoteModalOverlay" class="modal-overlay" style="display:none">
        <div class="modal-content large-modal">
            <div class="modal-header">
                <h2>Split Note</h2>
                <button type="button" class="close-modal-btn" id="separateModalCloseBtn">
                    <svg viewBox="0 0 24 24" width="20" height="20" stroke="currentColor" stroke-width="2" fill="none" stroke-linecap="round" stroke-linejoin="round"><line x1="18" y1="6" x2="6" y2="18"></line><line x1="6" y1="6" x2="18" y2="18"></line></svg>
                </button>
            </div>
            <div class="modal-body separate-notes-container">
                </div>
            <div class="modal-actions">
                <button type="button" class="modal-action-btn copy-save-btn-style" id="separateModalCopySaveBtn">
                    <svg viewBox="0 0 24 24" width="20" height="20" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M12 15H4a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h10a2 2 0 0 1 2 2v1H18a2 2 0 0 1 2 2v10a2 2 0 0 1-2 2h-5"/><path d="m8 7 2 2 4-4"/><path d="M18 7v6h-6"/></svg>
                    COPY & SAVE
                </button>
                <button type="button" class="modal-action-btn edit-btn-style" id="separateModalResolutionBtn">
                    <svg viewBox="0 0 24 24" width="20" height="20" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M9 11l3 3L22 4"/><path d="M21 12v7a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11"/></svg>
                    RESOLUTION
                </button>
                <button type="button" class="modal-action-btn" id="separateModalCopilotBtn">
                    <svg viewBox="0 0 24 24" width="20" height="20" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M12 8V4H8"/><rect width="16" height="12" x="4" y="8" rx="2"/><path d="M2 14h2"/><path d="M20 14h2"/><path d="M15 13v2"/><path d="M9 13v2"/></svg>
                    COPILOT
                </button>
                <button type="button" class="modal-action-btn close-btn-style" id="separateModalCloseBtnBottom">
                    <svg viewBox="0 0 24 24" width="20" height="20" stroke="currentColor" stroke-width="2" fill="none" stroke-linecap="round" stroke-linejoin="round"><line x1="18" y1="6" x2="6" y2="18"></line><line x1="6" y1="6" x2="18" y2="18"></line></svg>
                    CLOSE
                </button>
            </div>
        </div>
    </div>

    <div id="customConfirmModal" class="modal-overlay" style="display:none">
        <div class="modal-content small-modal">
            <div class="modal-header">
                <h3>Warning</h3>
            </div>
            <div class="modal-body">
                <p id="confirmMessage" class="confirm-message"></p>
            </div>
            <div class="modal-actions-confirm">
                <button type="button" id="confirmNoBtn" class="modal-action-btn close-btn-style">NO</button>
                <button type="button" id="confirmYesBtn" class="modal-action-btn copy-btn-style">YES</button>
            </div>
        </div>
    </div>
    
    <div id="feedbackModalOverlay" class="modal-overlay" style="display:none">
        <div class="modal-content">
            <div class="modal-header">
                <h3>Send Feedback</h3>
                <button type="button" class="close-modal-btn" id="closeFeedbackModalBtn">
                    <svg viewBox="0 0 24 24" width="20" height="20" stroke="currentColor" stroke-width="2" fill="none" stroke-linecap="round" stroke-linejoin="round"><line x1="18" y1="6" x2="6" y2="18"></line><line x1="6" y1="6" x2="18" y2="18"></line></svg>
                </button>
            </div>
            <div id="feedback-form-content" class="modal-body">
                <div class="google-form-container">
                    <iframe src="https://docs.google.com/forms/d/e/1FAIpQLScDxUnncRkZSDfL8_G2H8Z5buuaDp63RoN4rdpqB7cA0KjawA/viewform?embedded=true" width="520" height="540" frameborder="0" marginheight="0" marginwidth="0">Loading…</iframe>
                </div>
            </div>
            </div>
    </div>
    
    <div id="toast-container"></div>
    <div id="checklistSidebar" class="checklist-sidebar">
        <div class="sidebar-header">
            <h3>Checklist Menu</h3>
            <button type="button" class="close-sidebar-btn" id="closeChecklistBtn">
                <svg viewBox="0 0 24 24" width="18" height="18" stroke="currentColor" stroke-width="2" fill="none" stroke-linecap="round" stroke-linejoin="round"><line x1="18" y1="6" x2="6" y2="18"></line><line x1="6" y1="6" x2="18" y2="18"></line></svg>
            </button>
        </div>
        <div class="checklist-content">
            <div class="checklist-section">
                <h4 class="checklist-section-title">
                    <span class="checklist-title-text">Excellence Mandate</span>
                    <button type="button" class="clean-checklist-section-btn" data-section="excellence" title="Clear section">
                        <svg viewBox="0 0 24 24" width="16" height="16" stroke="currentColor" stroke-width="2" fill="none" stroke-linecap="round" stroke-linejoin="round"><path d="M3 6l3 0l0 18l12 0l0-18l3 0"></path><path d="M1 6l22 0"></path><path d="M8 6l0-3l8 0l0 3"></path></svg>
                    </button>
                </h4>
                <div class="checklist-items-container">
                    <div class="checklist-item status-pending" data-required="true">
                        <label>Did you secure the call by asking for a <strong>CALLBACK NUMBER</strong>?</label>
                        <div class="checklist-options">
                            <input type="radio" id="checklistCallbackNumber_yes" name="checklistCallbackNumber" value="yes"><label for="checklistCallbackNumber_yes">Yes</label>
                            <input type="radio" id="checklistCallbackNumber_no" name="checklistCallbackNumber" value="no"><label for="checklistCallbackNumber_no">No</label>
                            <input type="radio" id="checklistCallbackNumber_na" name="checklistCallbackNumber" value="na"><label for="checklistCallbackNumber_na">N/A</label>
                        </div>
                    </div>
                    <div class="checklist-item status-pending" data-required="true">
                        <label>Did you do all the relevant <strong>PROBING QUESTIONS</strong>?</label>
                        <div class="checklist-options">
                            <input type="radio" id="checklistProbingQuestions_yes" name="checklistProbingQuestions" value="yes"><label for="checklistProbingQuestions_yes">Yes</label>
                            <input type="radio" id="checklistProbingQuestions_no" name="checklistProbingQuestions" value="no"><label for="checklistProbingQuestions_no">No</label>
                            <input type="radio" id="checklistProbingQuestions_na" name="checklistProbingQuestions" value="na"><label for="checklistProbingQuestions_na">N/A</label>
                        </div>
                    </div>
                    <div class="checklist-item status-pending" data-required="true">
                        <label>Have you researched <strong>ADVANCED WIFI ANALYTICS</strong>?</label>
                        <div class="checklist-options">
                            <input type="radio" id="checklistAdvancedWifi_yes" name="checklistAdvancedWifi" value="yes"><label for="checklistAdvancedWifi_yes">Yes</label>
                            <input type="radio" id="checklistAdvancedWifi_no" name="checklistAdvancedWifi" value="no"><label for="checklistAdvancedWifi_no">No</label>
                            <input type="radio" id="checklistAdvancedWifi_na" name="checklistAdvancedWifi" value="na"><label for="checklistAdvancedWifi_na">N/A</label>
                        </div>
                    </div>
                    <div class="checklist-item status-pending" data-required="true">
                        <label>Have you used <strong>TVS / ROUTE THIS</strong>? Did you use video, photos, scan network and deadspots detector?</label>
                        <div class="checklist-options">
                            <input type="radio" id="checklistTvs_yes" name="checklistTvs" value="yes"><label for="checklistTvs_yes">Yes</label>
                            <input type="radio" id="checklistTvs_no" name="checklistTvs" value="no"><label for="checklistTvs_no">No</label>
                            <input type="radio" id="checklistTvs_na" name="checklistTvs" value="na"><label for="checklistTvs_na">N/A</label>
                        </div>
                    </div>
                    <div class="checklist-item status-pending" data-required="true">
                        <label>Did you do a <strong>REBOOT / FACTORY RESET</strong>? If that fixed the issue, are you sure this is not a <strong>TEMPORARY FIX</strong>?</label>
                        <div class="checklist-options">
                            <input type="radio" id="checklistReboot_yes" name="checklistReboot" value="yes"><label for="checklistReboot_yes">Yes</label>
                            <input type="radio" id="checklistReboot_no" name="checklistReboot" value="no"><label for="checklistReboot_no">No</label>
                            <input type="radio" id="checklistReboot_na" name="checklistReboot" value="na"><label for="checklistReboot_na">N/A</label>
                        </div>
                    </div>
                    <div class="checklist-item status-pending" data-required="true">
                        <label>Did you perform a device <strong>SWAP</strong>? Is absolutely <strong>NECESSARY</strong>? Are you sure this will <strong>FIX THE ISSUE</strong>?</label>
                        <div class="checklist-options">
                            <input type="radio" id="checklistSwap_yes" name="checklistSwap" value="yes"><label for="checklistSwap_yes">Yes</label>
                            <input type="radio" id="checklistSwap_no" name="checklistSwap" value="no"><label for="checklistSwap_no">No</label>
                            <input type="radio" id="checklistSwap_na" name="checklistSwap" value="na"><label for="checklistSwap_na">N/A</label>
                        </div>
                    </div>
                    <div class="checklist-item status-pending" data-required="true">
                        <label>Did you try to Set Automated Callback Instead of proactively offering a <strong>CALLBACK</strong>?</label>
                        <div class="checklist-options">
                            <input type="radio" id="checklistCallback_yes" name="checklistCallback" value="yes"><label for="checklistCallback_yes">Yes</label>
                            <input type="radio" id="checklistCallback_no" name="checklistCallback" value="no"><label for="checklistCallback_no">No</label>
                            <input type="radio" id="checklistCallback_na" name="checklistCallback" value="na"><label for="checklistCallback_na">N/A</label>
                        </div>
                    </div>
                </div>
            </div>

            <div class="checklist-section">
                <h4 class="checklist-section-title">
                    <span class="checklist-title-text">Troubleshoot Steps</span>
                    <button type="button" class="clean-checklist-section-btn" data-section="troubleshoot" title="Clear section">
                        <svg viewBox="0 0 24 24" width="16" height="16" stroke="currentColor" stroke-width="2" fill="none" stroke-linecap="round" stroke-linejoin="round"><path d="M3 6l3 0l0 18l12 0l0-18l3 0"></path><path d="M1 6l22 0"></path><path d="M8 6l0-3l8 0l0 3"></path></svg>
                    </button>
                </h4>
                <div class="checklist-items-container">
                    <div class="checklist-item status-pending">
                        <label>Did you select and follow the <strong>CORRECT INSIGHT WORKFLOW</strong>?</label>
                        <div class="checklist-options">
                            <input type="radio" id="checklistCorrectWorkflow_yes" name="checklistCorrectWorkflow" value="yes"><label for="checklistCorrectWorkflow_yes">Yes</label>
                            <input type="radio" id="checklistCorrectWorkflow_no" name="checklistCorrectWorkflow" value="no"><label for="checklistCorrectWorkflow_no">No</label>
                            <input type="radio" id="checklistCorrectWorkflow_na" name="checklistCorrectWorkflow" value="na"><label for="checklistCorrectWorkflow_na">N/A</label>
                        </div>
                    </div>
                    <div class="checklist-item status-pending">
                        <label>Did you use <a href="http://go/checkphysical" target="_blank" id="goCheckPhysicalLink" rel="noopener noreferrer"><strong>CHECK PHYSICAL</strong></a> to review the equipment and connections / lights / cables / damage?</label>
                        <div class="checklist-options">
                            <input type="radio" id="checklistCheckPhysical_yes" name="checklistCheckPhysical" value="yes"><label for="checklistCheckPhysical_yes">Yes</label>
                            <input type="radio" id="checklistCheckPhysical_no" name="checklistCheckPhysical" value="no"><label for="checklistCheckPhysical_no">No</label>
                            <input type="radio" id="checklistCheckPhysical_na" name="checklistCheckPhysical" value="na"><label for="checklistCheckPhysical_na">N/A</label>
                        </div>
                    </div>
                    <div class="checklist-item status-pending">
                        <label>Did you use the <a href="http://go/tscopilot" target="_blank" id="goTsCopilotLink" rel="noopener noreferrer"><strong>TS COPILOT AI</strong></a> to confirm you perform all the necesary steps to resolve the issue?</label>
                        <div class="checklist-options">
                            <input type="radio" id="checklistTsCopilot_yes" name="checklistTsCopilot" value="yes"><label for="checklistTsCopilot_yes">Yes</label>
                            <input type="radio" id="checklistTsCopilot_no" name="checklistTsCopilot" value="no"><label for="checklistTsCopilot_no">No</label>
                            <input type="radio" id="checklistTsCopilot_na" name="checklistTsCopilot" value="na"><label for="checklistTsCopilot_na">N/A</label>
                        </div>
                    </div>
                    <div class="checklist-item status-pending">
                        <label>Did you confirm with the cx that <strong>ALL SERVICES</strong> are <strong>WORKING</strong> now?</label>
                        <div class="checklist-options">
                            <input type="radio" id="checklistAllServices_yes" name="checklistAllServices" value="yes"><label for="checklistAllServices_yes">Yes</label>
                            <input type="radio" id="checklistAllServices_no" name="checklistAllServices" value="no"><label for="checklistAllServices_no">No</label>
                            <input type="radio" id="checklistAllServices_na" name="checklistAllServices" value="na"><label for="checklistAllServices_na">N/A</label>
                        </div>
                    </div>
                    <div class="checklist-item status-pending">
                        <label>Did you use <strong>GO/SEND</strong> in this interaction?</label>
                        <div class="checklist-options">
                            <input type="radio" id="checklistGoSend_yes" name="checklistGoSend" value="yes"><label for="checklistGoSend_yes">Yes</label>
                            <input type="radio" id="checklistGoSend_no" name="checklistGoSend" value="no"><label for="checklistGoSend_no">No</label>
                            <input type="radio" id="checklistGoSend_na" name="checklistGoSend" value="na"><label for="checklistGoSend_na">N/A</label>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <div class="sidebar-footer">
            <button type="button" id="btnChecklistYesAll" class="modal-action-btn">YES ALL</button>
        </div>
    </div>
    <div class="sidebar-overlay" id="checklist-sidebar-overlay"></div>
    
    <div id="historySidebar" class="history-sidebar">
        <div class="sidebar-header">
            <h3>Note History</h3>
            <button type="button" class="close-sidebar-btn" id="closeHistoryBtn">
                <svg viewBox="0 0 24 24" width="18" height="18" stroke="currentColor" stroke-width="2" fill="none" stroke-linecap="round" stroke-linejoin="round"><line x1="18" y1="6" x2="6" y2="18"></line><line x1="6" y1="6" x2="18" y2="18"></line></svg>
            </button>
        </div>
        <div class="history-search-container">
            <input type="text" id="historySearchInput" placeholder="Search by BAN, CID, CBR or Ticket..." autocomplete="off">
        </div>
        <div class="note-history-list" id="noteHistoryList">
            <p class="no-notes-message" id="noNotesMessage">No saved notes yet.</p>
        </div>
        <!-- INICIO: Contenido Añadido para Importar/Exportar -->
        <div id="historyactionsfooter" class="history-actions-footer">
            <button type="button" id="exportBtn" class="history-footer-btn export-btn">
                <svg xmlns="http://www.w3.org/2000/svg" width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"/><polyline points="7 10 12 15 17 10"/><line x1="12" y1="15" x2="12" y2="3"/></svg>
                <span>EXPORTAR</span>
            </button>
            <button type="button" id="importBtn" class="history-footer-btn import-btn">
                <svg xmlns="http://www.w3.org/2000/svg" width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"/><polyline points="17 8 12 3 7 8"/><line x1="12" y1="3" x2="12" y2="15"/></svg>
                <span>IMPORTAR</span>
            </button>
            <input type="file" id="importFile" class="hidden-file-input" accept="application/json">
        </div>
        <!-- FIN: Contenido Añadido para Importar/Exportar -->
    </div>
    <div class="sidebar-overlay" id="history-sidebar-overlay"></div>

    <div id="feedback-widget">
        <div class="feedback-tooltip">Have an idea to improve the app? Send it here!</div>
        <button type="button" id="feedback-btn" title="Send Feedback">
            <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z"></path></svg>
        </button>
    </div>
    
    <footer class="app-footer">
        <p>TELUS FFH PURE FIBER Tech Support | x331671 | Alex Van Houtven | June 2025</p>
    </footer>

    <script src="https://unpkg.com/dexie@latest/dist/dexie.js"></script>
    <script>
      // INICIO DEL CÓDIGO DE DRIVER.JS (VERSIÓN 1.3.1) - NO MODIFICAR
      !function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t():"function"==typeof define&&define.amd?define(t):(e="undefined"!=typeof globalThis?globalThis:e||self).driver=t()}(this,(function(){"use strict";var e,t,n,o,i,r,s,l,a,c,d,u,p,g,h,m,f,v,b,y,w,C,S,E,k,L,_,A,O,N,T,D,P,M,R,x,j,I,q,H,B,F,W,U,z,K,G,V,Y,X,J,Z,Q,ee,te,ne,oe,ie,re,se,le,ae,ce,de,ue,pe,ge,he,me,fe,ve,be,ye,we,Ce,Se,Ee,ke,Le,_e,Ae,Oe,Ne,Te,De,Pe,Me,Re,xe,je,Ie,qe,He,Be,Fe,We,Ue,ze,Ke,Ge,Ve,Ye,Xe,Je,Ze,Qe,et,tt,nt,ot,it,rt,st,lt,at,ct,dt,ut,pt,gt,ht,mt,ft,vt,bt,yt,wt,Ct,St,Et,kt,Lt,_t,At,Ot,Nt,Tt,Dt,Pt,Mt,Rt,xt,jt,It,qt,Ht,Bt,Ft,Wt,Ut,zt,Kt,Gt,Vt,Yt,Xt,Jt,Zt,Qt,en,tn,nn,on,rn,sn,ln,an,cn,dn,un,pn,gn,hn,mn,fn,vn,bn,yn,wn,Cn,Sn,En,kn,Ln,_n,An,On,Nn,Tn,Dn,Pn,Mn,Rn,xn,jn,In,qn,Hn,Bn,Fn,Wn,Un,zn,Kn,Gn,Vn,Yn,Xn,Jn,Zn,Qn,eo,to,no,oo,io,ro,so,lo,ao,co,uo,po,go,ho,mo,fo,vo,bo,yo,wo,Co,So,Eo,ko,Lo,_o,Ao,Oo,No,To,Do,Po,Mo,Ro,xo,jo,Io,qo,Ho,Bo,Fo,Wo,Uo,zo,Ko,Go,Vo,Yo,Xo,Jo,Zo,Qo,ei,ti,ni,oi,ii,ri,si,li,ai,ci,di,ui,pi,gi,hi,mi,fi,vi,bi,yi,wi,Ci,Si,Ei,ki,Li,_i,Ai,Oi,Ni,Ti,Di,Pi,Mi,Ri,xi,ji,Ii,qi,Hi,Bi,Fi,Wi,Ui,zi,Ki,Gi,Vi,Yi,Xi,Ji,Zi,Qi,er,tr,nr,or,ir,rr,sr,lr,ar,cr,dr,ur,pr,gr,hr,mr,fr,vr,br,yr,wr,Cr,Sr,Er,kr,Lr,_r,Ar,Or,Nr,Tr,Dr,Pr,Mr,Rr,xr,jr,Ir,qr,Hr,Br,Fr,Wr,Ur,zr,Kr,Gr,Vr,Yr,Xr,Jr,Zr,Qr,es,ts,ns,os,is,rs,ss,ls,as,cs,ds,us,ps,gs,hs,ms,fs,vs,bs,ys,ws,Cs,Ss,Es,ks,Ls,_s,As,Os,Ns,Ts,Ds,Ps,Ms,Rs,xs,js,Is,qs,Hs,Bs,Fs,Ws,Us,zs,Ks,Gs,Vs,Ys,Xs,Js,Zs,Qs,el,tl,nl,ol,il,rl,sl,ll,al,cl,dl,ul,pl,gl,hl,ml,fl,vl,bl,yl,wl,Cl,Sl,El,kl,Ll,_l,Al,Ol,Nl,Tl,Dl,Pl,Ml,Rl,xl,jl,Il,ql,Hl,Bl,Fl,Wl,Ul,zl,Kl,Gl,Vl,Yl,Xl,Jl,Zl,Ql,ea,ta,na,oa,ia,ra,sa,la,aa,ca,da,ua,pa,ga,ha,ma,fa,va,ba,ya,wa,Ca,Sa,Ea,ka,La,_a,Aa,Oa,Na,Ta,Da,Pa,Ma,Ra,xa,ja,Ia,qa,Ha,Ba,Fa,Wa,Ua,za,Ka,Ga,Va,Ya,Xa,Ja,Za,Qa,ec,tc,nc,oc,ic,rc,sc,lc,ac,cc,dc,uc,pc,gc,hc,mc,fc,vc,bc,yc,wc,Cc,Sc,Ec,kc,Lc,_c,Ac,Oc,Nc,Tc,Dc,Pc,Mc,Rc,xc,jc,Ic,qc,Hc,Bc,Fc,Wc,Uc,zc,Kc,Gc,Vc,Yc,Xc,Jc,Zc,Qc,ed,td,nd,od,id,rd,sd,ld,ad,cd,dd,ud,pd,gd,hd,md,fd,vd,bd,yd,wd,Cd,Sd,Ed,kd,Ld,_d,Ad,Od,Nd,Td,Dd,Pd,Md,Rd,xd,jd,Id,qd,Hd,Bd,Fd,Wd,Ud,zd,Kd,Gd,Vd,Yd,Xd,Jd,Zd,Qd;function eu(){return(eu=Object.assign?Object.assign.bind():function(e){for(var t=1,n=arguments.length;t<n;t++){var o=arguments[t];for(var i in o)Object.prototype.hasOwnProperty.call(o,i)&&(e[i]=o[i])}return e}).apply(this,arguments)}function tu(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,ru(e,t)}function nu(e){return(nu="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function ou(e){var t=function(e,t){if("object"!==nu(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var o=n.call(e,t||"default");if("object"!==nu(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===nu(t)?t:String(t)}function iu(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?su(Object(n),!0).forEach((function(t){au(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):su(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function ru(e,t){return(ru=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function su(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,o)}return n}function lu(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function au(e,t,n){return(t=ou(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var cu,du,uu,pu,gu,hu,mu,fu,vu,bu,yu,wu,Cu,Su,Eu,ku,Lu,_u,Au,Ou,Nu,Tu,Du,Pu,Mu,Ru,xu,ju,Iu,qu,Hu,Bu,Fu,Wu,Uu,zu,Ku,Gu,Vu,Yu,Xu,Ju,Zu,Qu,ep,tp,np,op,ip,rp,sp,lp,ap,cp,dp,up,pp,gp,hp,mp,fp,vp,bp,yp,wp,Cp,Sp,Ep,kp,Lp,_p,Ap,Op,Np,Tp,Dp,Pp,Mp,Rp,xp,jp,Ip,qp,Hp,Bp,Fp,Wp,Up,zp,Kp,Gp,Vp,Yp,Xp,Jp,Zp,Qp,eg,tg,ng,og,ig,rg,sg,lg,ag,cg,dg,ug,pg,gg,hg,mg,fg,vg,bg,yg,wg,Cg,Sg,Eg,kg,Lg,_g,Ag,Og,Ng,Tg,Dg,Pg,Mg,Rg,xg,jg,Ig,qg,Hg,Bg,Fg,Wg,Ug,zg,Kg,Gg,Vg,Yg,Xg,Jg,Zg,Qg,eh,th,nh,oh,ih,rh,sh,lh,ah,ch,dh,uh,ph,gh,hh,mh,fh,vh,bh,yh,wh,Ch,Sh,Eh,kh,Lh,_h,Ah,Oh,Nh,Th,Dh,Ph,Mh,Rh,xh,jh,Ih,qh,Hh,Bh,Fh,Wh,Uh,zh,Kh,Gh,Vh,Yh,Xh,Jh,Zh,Qh,em,tm,nm,om,im,rm,sm,lm,am,cm,dm,um,pm,gm,hm,mm,fm,vm,bm,ym,wm,Cm,Sm,Em,km,Lm,_m,Am,Om,Nm,Tm,Dm,Pm,Mm,Rm,xm,jm,Im,qm,Hm,Bm,Fm,Wm,Um,zm,Km,Gm,Vm,Ym,Xm,Jm,Zm,Qm,ef,tf,nf,of,rf,sf,lf,af,cf,df,uf,pf,gf,hf,mf,ff,vf,bf,yf,wf,Cf,Sf,Ef,kf,Lf,_f,Af,Of,Nf,Tf,Df,Pf,Mf,Rf,xf,jf,If,qf,Hf,Bf,Ff,Wf,Uf,zf,Kf,Gf,Vf,Yf,Xf,Jf,Zf,Qf,ev,tv,nv,ov,iv,rv,sv,lv,av,cv,dv,uv,pv,gv,hv,mv,fv,vv,bv,yv,wv,Cv,Sv,Ev,kv,Lv,_v,Av,Ov,Nv,Tv,Dv,Pv,Mv,Rv,xv,jv,Iv,qv,Hv,Bv,Fv,Wv,Uv,zv,Kv,Gv,Vv,Yv,Xv,Jv,Zv,Qv,eb,tb,nb,ob,ib,rb,sb,lb,ab,cb,db,ub,pb,gb,hb,mb,fb,vb,bb,yb,wb,Cb,Sb,Eb,kb,Lb,_b,Ab,Ob,Nb,Tb,Db,Pb,Mb,Rb,xb,jb,Ib,qb,Hb,Bb,Fb,Wb,Ub,zb,Kb,Gb,Vb,Yb,Xb,Jb,Zb,Qb,ey,ty,ny,oy,iy,ry,sy,ly,ay,cy,dy,uy,py,gy,hy,my,fy,vy,by,yy,wy,Cy,Sy,Ey,ky,Ly,_ycie.preventDefault?cie.preventDefault():cie.returnValue=!1}function Oe(e){var t;return null===(t=e.ownerDocument.defaultView)?void 0:t.getComputedStyle(e)}function Ne(e){return e instanceof(null===(t=e.ownerDocument.defaultView)?void 0:t.HTMLElement)}function Te(e){return e?e.ownerDocument:document}function De(e){return e.split("-")[0]}function Pe(e){var t=Oe(e);return{width:e.offsetWidth,height:e.offsetHeight,left:parseFloat(t.marginLeft)+parseFloat(t.borderLeftWidth),top:parseFloat(t.marginTop)+parseFloat(t.borderTopWidth)}}function Me(e,t,n){var o=Ne(t),i=t.getBoundingClientRect(),r=o?Pe(t):{width:0,height:0,left:0,top:0},s={scrollLeft:0,scrollTop:0},l={x:i.left+s.scrollLeft,y:i.top+s.scrollTop};if(e&&"viewport"===n.placement){var a=Oe(Te(t).documentElement);l.x=parseFloat(a.paddingLeft),l.y=parseFloat(a.paddingTop)}else l.x-=r.left,l.y-=r.top;return l}function Re(e,t,n,o,i){if("viewport"===i){var r;return{left:0,top:0,right:null===(r=e.ownerDocument.defaultView)?void 0:r.innerWidth,bottom:e.ownerDocument.defaultView.innerHeight}}var s=e.getBoundingClientRect(),l=t.getBoundingClientRect(),a=-1!==["top","bottom"].indexOf(n)?-1:1,c=-1!==["top","bottom"].indexOf(n)?1:-1,d=s[De(n)];if(d>l[De(n)]&&!o){d+=l["left"===De(n)||"top"===De(n)?De(n):"width"]*a,d-=s["left"===De(n)||"top"===De(n)?De(n):"width"]*a}if(d<l[De(n)]&&o){d-=l["left"===De(n)||"top"===De(n)?De(n):"width"]*c,d+=s["left"===De(n)||"top"===De(n)?De(n):"width"]*c}return d}function xe(e,t){var n=t.split("-")[1];return e[n]}function je(e){if(null==e)return[];var t,n;return[].concat(e,null===(t=e.ownerDocument)||void 0===(n=t.defaultView)?void 0:n.getComputedStyle(e).getPropertyValue("--driver-popover-offset"))}function Ie(e,t){return xe(e,t)?xe(e,t):0}function qe(e,t){var n,o=je(t),i=o[0],r=o[1];return void 0!==i?i:"top"===(n=e,n.split("-")[0])||"bottom"===n?r||0:0}function He(e,t){var n,o=je(t),i=o[0],r=o[1];return void 0!==i?i:"left"===(n=e,n.split("-")[0])||"right"===n?r||0:0}function Be(e,t,n,o,i,r){var s=Me(o,n,i),l=Re(n,i,t,o,r),a=qe(t,n),c=He(t,n),d="top"===De(t)?s.y-a:s.y+a,u="left"===De(t)?s.x-c:s.x+c,p={top:d,bottom:d+e.height,left:u,right:u+e.width},g="top"===De(t),h="bottom"===De(t),m="left"===De(t),f="right"===De(t),v=Ie(e,t),b=p.left+v,y=p.top+v;switch(De(t)){case"top":p.top=l-e.height-a,p.left=b;break;case"bottom":p.top=l+n.offsetHeight+a,p.left=b;break;case"left":p.left=l-e.width-c,p.top=y;break;case"right":p.left=l+n.offsetWidth+c,p.top=y;break}if(-1!==t.indexOf("-")){var w=xe(n,t),C=xe(i,t);if("top"===De(t)||"bottom"===De(t)){var S=-1!==t.indexOf("start"),E=-1!==t.indexOf("end");S?p.left=w:E&&(p.left=w-e.width+n.offsetWidth)}else{var k=-1!==t.indexOf("start"),L=-1!==t.indexOf("end");k?p.top=C:L&&(p.top=C-e.height+n.offsetHeight)}}return p}var Fe={name:"flip",fn:function(e){var t=e.placement,n=e.reference,o=e.popper,i=e.fallbackPlacements,r=e.flipVariations,s=e.flipCallback;if(!i)return e;var l=De(t),a=De(i[0]),c=i.slice();if(l===a)return e;var d=o.getBoundingClientRect(),u=n.getBoundingClientRect(),p="viewport"===e.boundary,g=Me(p,n,e),h=Me(p,o,e),m=Be({width:d.width,height:d.height},t,n,p,e.boundary,e.boundary);m.top+=h.y-g.y,m.bottom+=h.y-g.y,m.left+=h.x-g.x,m.right+=h.x-g.x;var f={top:g.y,bottom:g.y+u.height,left:g.x,right:g.x+u.width},v=function(e,t,n){var o=e.popper,i=e.reference,r=e.placement,s=e.boundary,l=e.isReferenceHidden;if(void 0===n&&(n=!1),"viewport"===s){var a=o.getBoundingClientRect();"bottom"===r&&a.top>i.bottom||"top"===r&&a.bottom<i.top||"right"===r&&a.left>i.right||"left"===r&&a.right<i.left}else{var c=i.getBoundingClientRect(),d=s.getBoundingClientRect();"bottom"===r&&c.bottom>d.bottom||"top"===r&&c.top<d.top||"right"===r&&c.right>d.right||"left"===r&&c.left<d.left}return n||l}({popper:m,reference:f,placement:t,boundary:e.boundary,isReferenceHidden:e.isReferenceHidden}),b=[];if(v&&c.length>0){b.push(c.shift());var y=function e(t,n,o,i){var r=De(t),s=n.find((function(e){return De(e)===r}));if(s&&i.indexOf(s)<0){o.unshift(s);var l=s.split("-")[1];l&&n.filter((function(e){var n=De(e),o=e.split("-")[1];return n===r&&o&&o!==l})).forEach((function(e){o.push(e)}))}return e}(t,c.filter((function(e){return r?e.indexOf("-")>-1:e.indexOf("-")<0})),b,i),w=y[0];if(!w)return e;if(De(t)!==De(w))return eu({},e,{placement:w,fallbackPlacements:y.slice(1)})}}return eu({},e,{placement:w,fallbackPlacements:y.slice(1)})}},We={name:"preventOverflow",options:{padding:5,boundariesElement:"viewport"},fn:function(e){var t=e.popper,n=e.reference,o=e.placement,i=e.options.padding,r="viewport"===e.options.boundariesElement?Te(t).documentElement:e.options.boundariesElement,s=r.getBoundingClientRect(),l=t.getBoundingClientRect(),a=Me(!0,n,e),c=l.width,d=l.height,u={top:a.y-d-i,bottom:a.y+n.offsetHeight+i,left:a.x-c-i,right:a.x+n.offsetWidth+i};switch(De(o)){case"top":l.top<s.top+i&&(t.style.top="".concat(s.top+i,"px"));break;case"bottom":l.bottom>s.bottom-i&&(t.style.top="".concat(a.y-d-i,"px"));break;case"left":l.left<s.left+i&&(t.style.left="".concat(s.left+i,"px"));break;case"right":l.right>s.right-i&&(t.style.left="".concat(s.right-c-i,"px"))}return e}},Ue={name:"arrow",fn:function(e){var t=e.popper,n=e.placement,o=e.arrow,i=o.element.getBoundingClientRect(),r=t.getBoundingClientRect(),s=r.width,l=r.height,a=r.left,c=r.top,d=i.width,u=i.height,p=n.split("-"),g=p[0],h=p[1],m="top"===g||"bottom"===g;return m?{top:m?r.top-t.offsetTop-u:void 0,left:h?r.left+s/2-d/2:void 0}:{top:h?r.top+l/2-u/2:void 0,left:m?void 0:r.left-t.offsetLeft-d}},ze={name:"applyStyles",fn:function(e){e.popper.setAttribute("x-placement",e.placement)}};return function(){function e(t,n,o){void 0===o&&(o={}),this.reference=t,this.popper=n,this.options=Object.assign(Object.assign({},e.Defaults),o),this.state={},this.update(),this.onCreate(this)}var t=e.prototype;return t.update=function(){var e=this;this.state.placement=this.options.placement,this.state.originalPlacement=this.options.placement;var t=this.options.modifiers.map((function(t){var n=e.options.modifiers.find((function(e){return e.name===t.name}));return n?Object.assign(Object.assign({},t),n):t}));this.options.modifiers.forEach((function(t){var n;null===(n=t.fn)?void 0:n.call(e,e.state,e.options)})),this.state=this.options.modifiers.reduce((function(t,n){var o;return null===(o=n.fn)?t:o(t,e.options)}),this.state),this.popper.style.position="absolute";var n=Be(this.popper.getBoundingClientRect(),this.state.placement,this.reference,this.options.isReferenceHidden,this.options.boundariesElement,this.options.boundary);this.popper.style.top="".concat(n.top,"px"),this.popper.style.left="".concat(n.left,"px"),this.state.arrowStyles={};var o=this.popper.querySelector(".driver-popover-arrow");o&&(this.state.arrowStyles=null==this.options.modifiers.find((function(t){return"arrow"===t.name}))?{}:Ue.fn(this.state,this.options)),Object.assign(o.style,this.state.arrowStyles)},t.destroy=function(){this.popper.removeAttribute("x-placement"),this.popper.style.position=null,this.popper.style.top=null,this.popper.style.left=null,this.onDestroy(this)},t.onCreate=function(e){this.options.onCreate(e)},t.onDestroy=function(e){this.options.onDestroy(e)},e}().Defaults={placement:"bottom",positionFixed:!1,eventsEnabled:!0,modifiers:[We,Fe,ze],onCreate:function(){},onDestroy:function(){}},function(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}(cu={},"popover",{className:"driver-popover"}),(du=iu({},cu,{className:"driver-popover-arrow"}))["popover-arrow"]=du,(uu=iu({},du,{className:"driver-popover-title"}))["popover-title"]=uu,(pu=iu({},uu,{className:"driver-popover-description"}))["popover-description"]=pu,(gu=iu({},pu,{className:"driver-popover-footer"}))["popover-footer"]=gu,(hu=iu({},gu,{className:"driver-popover-close-btn"}))["popover-close-btn"]=hu,(mu=iu({},hu,{className:"driver-popover-nav-btns"}))["popover-nav-btns"]=mu,(fu=iu({},mu,{className:"driver-popover-prev-btn"}))["popover-prev-btn"]=fu,(vu=iu({},fu,{className:"driver-popover-next-btn"}))["popover-next-btn"]=vu,(bu=iu({},vu,{className:"driver-popover-progress-text"}))["popover-progress-text"]=bu,function e(t,n){var o,i;void 0===n&&(n={}),(i=this,void 0===(o=void 0)||(i._self=o),this.options=iu(iu({},{animate:!0,allowClose:!0,opacity:.7,padding:10,scrollIntoViewOptions:void 0,stageClassName:"driver-stage",popoverClassName:"driver-popover",stageRadius:5,popoverOffset:5,showProgress:!1,progressText:"{{current}} of {{total}}",showButtons:["next","previous","close"],disableButtons:["close"],onPopoverRender:function(){},onHighlightStarted:function(){},onHighlighted:function(){},onDeselected:function(){},onDestroyStarted:function(){},onDestroyed:function(){}}),n),this.document=t,this.isActivated=!1,this.backdrop=void 0,this.wrapper=void 0,this.popover=void 0,this.popper=void 0,this.activeElement=void 0,this.activeStep=void 0,this.moving=!1,this.activeIndex=void 0,this.steps=void 0,this.onResize=this.onResize.bind(this),this.onKeyUp=this.onKeyUp.bind(this)}(yu=e.prototype).drive=function(e){var t=this;void 0===e&&(e=0);var n=this.options.steps;if(!n||0===n.length)throw new Error("No steps to drive through");if("number"!=typeof e)throw new Error("Initial step must be a number");if(!n[e])throw new Error("Initial step is not in the steps array");this.isActivated=!0,this.activeIndex=e,this.document.body.classList.add("driver-active"),this.document.addEventListener("keyup",this.onKeyUp),this.document.addEventListener("click",this.onClick,this.options.allowClose),this.onResize(),this.highlight(n[e]),this.options.onDestroyStarted((function(){t.destroy()}))},yu.onClick=function(e){var t=e.target,n=t.closest(".driver-popover");n||this.destroy()},yu.onResize=function(){this.isActivated&&this.refresh()},yu.onKeyUp=function(e){this.isActivated&&(this.options.allowKeyboardControl&&(39===e.keyCode?this.moveNext():37===e.keyCode?this.movePrevious():27===e.keyCode&&this.destroy()))},yu.refresh=function(){this.activeElement&&this.highlight(this.activeStep)},yu.moveNext=function(){var e=this.options.steps,t=this.activeIndex+1;e[t]?this.highlight(e[t]):this.destroy()},yu.movePrevious=function(){var e=this.options.steps,t=this.activeIndex-1;e[t]?this.highlight(e[t]):this.destroy()},yu.moveTo=function(e){var t=this.options.steps;if(!t[e])return this.destroy();this.highlight(t[e])},yu.highlight=function(e){var t=this;this.moving=!0,this.activeStep=e;var n=e.element,o=n&&"string"==typeof n?this.document.querySelector(n):n;if(!o){var i=this.activeIndex,r=this.options.steps;return this.activeIndex=void 0,void(i<r.length-1?this.moveNext():i>0?this.movePrevious():this.destroy())}this.options.onHighlightStarted(o,e,function(){t.destroy()});var s=function(){var n=o.getBoundingClientRect(),i=n.top,r=n.left,s=n.width,l=n.height,a=t.document.body.scrollTop||t.document.documentElement.scrollTop,c=t.document.body.scrollLeft||t.document.documentElement.scrollLeft,d=i+a-t.options.padding/2,u=r+c-t.options.padding/2,p=s+t.options.padding,g=l+t.options.padding,h=t.document.body.offsetWidth,m=t.document.body.offsetHeight;t.activeElement=o,t.backdrop||(t.backdrop=function(e,t,n){var o=t.document,i=o.createElement("div");i.classList.add(n,"driver-backdrop");var r=o.createElement("div");return r.classList.add(n,"driver-stage"),i.appendChild(r),o.body.appendChild(i),i}(0,t,t.options.stageClassName)),Object.assign(t.backdrop.firstElementChild.style,{width:"".concat(p,"px"),height:"".concat(g,"px"),top:"".concat(d,"px"),left:"".concat(u,"px"),borderRadius:"".concat(t.options.stageRadius,"px"),boxShadow:"0 0 0 ".concat(Math.max(h,m),"px rgba(0, 0, 0, ").concat(t.options.opacity,")")}),t.popover&&t.popover.destroy(),t.popover=function(e,t,n){var o=t.document,i=n.popover,r=o.createElement("div");r.classList.add(n.popoverClassName);var s=i.title?o.createElement("div"):void 0;s&&s.innerText,s&&s.classList.add("".concat(bu["popover-title"])),s&&r.appendChild(s);var l=i.description?o.createElement("div"):void 0;l&&(l.innerText=i.description),l&&l.classList.add("".concat(bu["popover-description"])),l&&r.appendChild(l);var a,c=o.createElement("div");c.classList.add("".concat(bu["popover-footer"]));var d=o.createElement("div");d.classList.add("".concat(bu["popover-nav-btns"])),c.appendChild(d);var u=n.progressText.replace("{{current}}",e+1).replace("{{total}}",n.steps.length),p=o.createElement("span");n.showProgress&&p.classList.add("".concat(bu["popover-progress-text"])),n.showProgress&&p.innerText,n.showProgress&&c.appendChild(p);var g=function(e,t){return void 0===t&&(t=[]),!t.includes(e)},h=g("previous",n.disableButtons)?o.createElement("button"):void 0;h&&(h.innerText="Previous"),h&&h.classList.add("".concat(bu["popover-prev-btn"])),h&&d.appendChild(h),h&&h.addEventListener("click",(function(){t.movePrevious()}));var m=g("next",n.disableButtons)?o.createElement("button"):void 0;m&&(m.innerText="Next"),m&&m.classList.add("".concat(bu["popover-next-btn"])),m&&d.appendChild(m),m&&m.addEventListener("click",(function(){t.moveNext()}));var f=g("close",n.disableButtons)?o.createElement("button"):void 0;return f&&(f.innerText="Close"),f&&f.classList.add("".concat(bu["popover-close-btn"])),f&&d.appendChild(f),f&&f.addEventListener("click",(function(){t.destroy()})),n.onPopoverRender(i,function(){var e=eu({},t.options,{placement:i.side||"bottom",onCreate:function(){},onDestroy:function(){}});t.popper=new ze(t.activeElement,r,e),n.onHighlighted(t.activeElement,n,function(){t.destroy()})}),r}(t.activeIndex,t,t.options),o.scrollIntoView(t.options.scrollIntoViewOptions),t.moving=!1};e.onHighlight?e.onHighlight(o,e,s):s()},yu.destroy=function(){var e=this;if(!this.isActivated)return;var t=this.options.steps.indexOf(this.activeStep);this.options.onDeselected(this.activeElement,this.activeStep,(function(){e.isActivated=!1,e.document.body.classList.remove("driver-active"),e.document.removeEventListener("keyup",e.onKeyUp),e.document.removeEventListener("click",e.onClick),e.backdrop&&e.backdrop.remove(),e.backdrop=void 0,e.popover&&e.popover.destroy(),e.popover=void 0,e.popper&&e.popper.destroy(),e.popper=void 0,e.activeElement=void 0,e.activeStep=void 0,e.moving=!1,e.activeIndex=t,e.options.onDestroyed()}))};var wu={driver:e};return wu.driver=e,wu.default=e,wu}()));

      // FIN DEL CÓDIGO DE DRIVER.JS

      // INICIO DE TU CÓDIGO DEL TUTORIAL
      if (!localStorage.getItem('tutorialDriverCompletado')) {
        const driverObj = driver({
          showProgress: true,
          animate: true,
          allowClose: true,
          onDestroyStarted: () => {
            if (!driverObj.isLastStep() && driverObj.getActiveIndex() !== undefined) {
              localStorage.setItem('tutorialDriverCompletado', 'true');
              return;
            }
            driverObj.destroy();
            localStorage.setItem('tutorialDriverCompletado', 'true');
          },
          steps: [
            // Aquí va tu lista de pasos, como la tenías
            { popover: { title: '¡Bienvenido/a a tu Asistente de Notas!', description: 'Este es un recorrido rápido por las funciones principales.' }},
            { element: '#agentinfo', popover: { title: 'Información del Agente', description: 'Asegúrate de que tu nombre y "Skill" estén correctos.', side: "bottom" }},
            { element: '#callNoteForm', popover: { title: 'Formulario Principal', description: 'Aquí documentarás toda la interacción.', side: "top" }},
            { element: '#seccion1', popover: { title: 'Cuenta y Verificación', description: 'Ingresa los detalles de la cuenta y los pasos de verificación.', side: "top" }},
            { element: '#seccion2', popover: { title: 'Problema y Diagnóstico', description: 'Describe el problema reportado y los pasos de diagnóstico.', side: "top" }},
            { element: '#seccion3', popover: { title: 'AWA y TVS', description: 'Documenta aquí la información relacionada con AWA y TVS.', side: "top" }},
            { element: '#seccion4', popover: { title: 'Resolución', description: 'Detalla la resolución del caso y los próximos pasos.', side: "top" }},
            { element: '#topactions', popover: { title: 'Acciones Principales', description: 'Desde aquí puedes copiar la nota, generarla o limpiarla.', side: "bottom" }},
            { element: '#noteModalOverlay', popover: { title: 'Vista Previa de la Nota', description: 'Aquí puedes ver una vista previa de la nota final.', side: "top" }},
            { element: '#separateNoteModalOverlay', popover: { title: 'Nota Separada', description: 'Este modal te permite trabajar con la nota en otro formato.', side: "top" }},
            { element: '#historySidebar', popover: { title: 'Historial de Notas', description: 'Este panel contiene el historial de tus notas.', side: "left" }},
            { element: '#historySearchInput', popover: { title: 'Buscador en Historial', description: 'Usa este campo para buscar rápidamente en tu historial.', side: "bottom" }},
            { element: '#historyactionsfooter', popover: { title: 'Exportar e Importar', description: 'Desde aquí puedes exportar o importar tu historial.', side: "top" }},
            { element: '#checklistSidebar', popover: { title: 'Excellence Mandate', description: 'Este menú te da acceso a checklists y mandatos de excelencia.', side: "right" }},
            { element: '#feedback-btn', popover: { title: 'Tu Opinión Importa', description: 'Si tienes sugerencias o encuentras un error, contáctanos aquí.', side: "top" }},
            { popover: { title: '¡Tour Completado!', description: '¡Ya estás listo para empezar!' }}
          ]
        });

        driverObj.drive();
      }
    </script>

</body>
</html>
